{"pageProps":{"post":{"mdxSource":"var Component=(()=>{var t=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=a=>l(a,\"__esModule\",{value:!0});var N=(a,s)=>()=>(s||a((s={exports:{}}).exports,s),s.exports),k=(a,s)=>{i(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},u=(a,s,c)=>{if(s&&typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!m.call(a,n)&&n!==\"default\"&&l(a,n,{get:()=>s[n],enumerable:!(c=d(s,n))||c.enumerable});return a},g=a=>u(i(l(a!=null?t(h(a)):{},\"default\",a&&a.__esModule&&\"default\"in a?{get:()=>a.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=N((R,r)=>{r.exports=_jsx_runtime});var b={};k(b,{default:()=>w,frontmatter:()=>y});var e=g(o()),y={title:\"\\uC2E4\\uC804 Dockerfile \\uC791\\uC131 \\uD328\\uD134: \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uBCC4 \\uBCA0\\uC2A4\\uD2B8 \\uD504\\uB799\\uD2F0\\uC2A4\",date:\"2025-11-17\",tags:[\"docker\",\"dockerfile\",\"nextjs\",\"react\",\"nodejs\",\"python\",\"devops\"],draft:!1,summary:\"Next.js, React, Express, NestJS, FastAPI \\uB4F1 \\uC8FC\\uC694 \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uBCC4\\uB85C \\uCD5C\\uC801\\uD654\\uB41C Dockerfile \\uC791\\uC131\\uBC95\\uACFC \\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0 \\uBE4C\\uB4DC, \\uBCF4\\uC548, \\uCE90\\uC2DC \\uCD5C\\uC801\\uD654 \\uC804\\uB7B5\\uC744 \\uC2E4\\uC804 \\uC608\\uC2DC\\uC640 \\uD568\\uAED8 \\uC815\\uB9AC\\uD588\\uC2B5\\uB2C8\\uB2E4.\",images:[],layout:\"PostSimple\",canonicalUrl:\"https://bulhwi.github.io/blog/dockerfile-best-practices-by-framework\"};function f(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ol:\"ol\",li:\"li\",hr:\"hr\",h3:\"h3\",p:\"p\",strong:\"strong\",pre:\"pre\",code:\"code\",ul:\"ul\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\uBAA9\\uCC28\",children:[(0,e.jsx)(n.a,{href:\"#\\uBAA9\\uCC28\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uBAA9\\uCC28\"]}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#dockerfile-%EC%9E%91%EC%84%B1-%EA%B8%B0%EB%B3%B8-%EC%9B%90%EC%B9%99\",children:\"Dockerfile \\uC791\\uC131 \\uAE30\\uBCF8 \\uC6D0\\uCE59\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#nextjs-app-router\",children:\"Next.js (App Router)\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#react--vite\",children:\"React + Vite\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#expressjs\",children:\"Express.js\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#nestjs\",children:\"NestJS\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#fastapi-python\",children:\"FastAPI (Python)\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#%EA%B3%B5%ED%86%B5-%EC%B5%9C%EC%A0%81%ED%99%94-%ED%8C%81\",children:\"\\uACF5\\uD1B5 \\uCD5C\\uC801\\uD654 \\uD301\"})})]}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"dockerfile-\\uC791\\uC131-\\uAE30\\uBCF8-\\uC6D0\\uCE59\",children:[(0,e.jsx)(n.a,{href:\"#dockerfile-\\uC791\\uC131-\\uAE30\\uBCF8-\\uC6D0\\uCE59\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Dockerfile \\uC791\\uC131 \\uAE30\\uBCF8 \\uC6D0\\uCE59\"]}),(0,e.jsxs)(n.h3,{id:\"1-\\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0-\\uBE4C\\uB4DC-\\uC0AC\\uC6A9\",children:[(0,e.jsx)(n.a,{href:\"#1-\\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0-\\uBE4C\\uB4DC-\\uC0AC\\uC6A9\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. \\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0 \\uBE4C\\uB4DC \\uC0AC\\uC6A9\"]}),(0,e.jsx)(n.p,{children:\"\\uBE4C\\uB4DC \\uB3C4\\uAD6C\\uC640 \\uB7F0\\uD0C0\\uC784\\uC744 \\uBD84\\uB9AC\\uD574\\uC11C \\uCD5C\\uC885 \\uC774\\uBBF8\\uC9C0 \\uD06C\\uAE30\\uB97C \\uB300\\uD3ED \\uC904\\uC785\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Before (Single Stage):\"})}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm install\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"npm\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"start\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"After (Multi-Stage):\"})}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package*.json ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /app/dist ./dist\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package*.json ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci --only=production\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dist/index.js\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0 \\uBE4C\\uB4DC\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\uBE4C\\uB4DC \\uB3C4\\uAD6C(\\uCEF4\\uD30C\\uC77C\\uB7EC, \\uAC1C\\uBC1C \\uC758\\uC874\\uC131)\\uAC00 \\uCD5C\\uC885 \\uC774\\uBBF8\\uC9C0\\uC5D0 \\uD3EC\\uD568\\uB418\\uC9C0 \\uC54A\\uC74C\"}),(0,e.jsx)(n.li,{children:\"Alpine \\uBCA0\\uC774\\uC2A4 \\uC774\\uBBF8\\uC9C0\\uB85C \\uACBD\\uB7C9\\uD654\"}),(0,e.jsx)(n.li,{children:\"\\uBCF4\\uC548: \\uACF5\\uACA9 \\uD45C\\uBA74 \\uAC10\\uC18C\"})]}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"2-\\uB808\\uC774\\uC5B4-\\uCE90\\uC2F1-\\uCD5C\\uC801\\uD654\",children:[(0,e.jsx)(n.a,{href:\"#2-\\uB808\\uC774\\uC5B4-\\uCE90\\uC2F1-\\uCD5C\\uC801\\uD654\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. \\uB808\\uC774\\uC5B4 \\uCE90\\uC2F1 \\uCD5C\\uC801\\uD654\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u274C \\uB098\\uC05C \\uC608:\"})}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm install\"]}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"package.json\\uC774 \\uBC14\\uB00C\\uC9C0 \\uC54A\\uC544\\uB3C4 \\uC18C\\uC2A4 \\uCF54\\uB4DC\\uB9CC \\uBC14\\uB00C\\uBA74 \",(0,e.jsx)(n.code,{children:\"npm install\"}),\" \\uC7AC\\uC2E4\\uD589\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u2705 \\uC88B\\uC740 \\uC608:\"})}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package*.json ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm install\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"package.json\\uC774 \\uBC14\\uB00C\\uC9C0 \\uC54A\\uC73C\\uBA74 \\uCE90\\uC2DC\\uB41C \\uB808\\uC774\\uC5B4 \\uC7AC\\uC0AC\\uC6A9\"}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"3-\\uBCF4\\uC548-\\uAC15\\uD654\",children:[(0,e.jsx)(n.a,{href:\"#3-\\uBCF4\\uC548-\\uAC15\\uD654\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. \\uBCF4\\uC548 \\uAC15\\uD654\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"non-root \\uC720\\uC800 \\uC0AC\\uC6A9\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"Alpine \\uB610\\uB294 Distroless \\uBCA0\\uC774\\uC2A4 \\uC774\\uBBF8\\uC9C0\"})}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\uCDE8\\uC57D\\uC810 \\uC2A4\\uCE94\"}),\" (Trivy, Snyk)\"]})]}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"4-dockerignore-\\uD544\\uC218\",children:[(0,e.jsx)(n.a,{href:\"#4-dockerignore-\\uD544\\uC218\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"4. .dockerignore \\uD544\\uC218\"]}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`node_modules\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`npm-debug.log\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.env\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.git\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.vscode\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`*.md\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.DS_Store\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`dist\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`build\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`coverage\n`})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"nextjs-app-router\",children:[(0,e.jsx)(n.a,{href:\"#nextjs-app-router\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Next.js (App Router)\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCD5C\\uC801\\uD654\\uB41C-dockerfile\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD5C\\uC801\\uD654\\uB41C-dockerfile\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD5C\\uC801\\uD654\\uB41C Dockerfile\"]}),(0,e.jsx)(n.p,{children:\"Next.js \\uACF5\\uC2DD \\uC608\\uC81C\\uB97C \\uAE30\\uBC18\\uC73C\\uB85C \\uD55C \\uD504\\uB85C\\uB355\\uC158 \\uCD5C\\uC801\\uD654 \\uBC84\\uC804\\uC785\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Dependencies Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" deps\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" apk add --no-cache libc6-compat\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# package.json\\uACFC lock \\uD30C\\uC77C\\uB9CC \\uBA3C\\uC800 \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Builder Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# deps\\uC5D0\\uC11C node_modules \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"deps\"})]}),\" /app/node_modules ./node_modules\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD658\\uACBD \\uBCC0\\uC218 (\\uBE4C\\uB4DC \\uC2DC\\uC810\\uC5D0 \\uD544\\uC694\\uD55C \\uACBD\\uC6B0)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ARG NEXT_PUBLIC_API_URL\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ENV NEXT_PUBLIC_API_URL=$NEXT_PUBLIC_API_URL\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Next.js \\uD154\\uB808\\uBA54\\uD2B8\\uB9AC \\uBE44\\uD65C\\uC131\\uD654\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" NEXT_TELEMETRY_DISABLED 1\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uBE4C\\uB4DC \\uC2E4\\uD589\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Runner Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" runner\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" NODE_ENV production\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" NEXT_TELEMETRY_DISABLED 1\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# non-root \\uC720\\uC800 \\uC0DD\\uC131\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" addgroup --system --gid 1001 nodejs\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" adduser --system --uid 1001 nextjs\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD544\\uC694\\uD55C \\uD30C\\uC77C\\uB9CC \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /app/public ./public\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /app/.next/standalone ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /app/.next/static ./.next/static\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC720\\uC800 \\uAD8C\\uD55C \\uC124\\uC815\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" nextjs\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 3000\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" PORT 3000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"server.js\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"nextconfigjs-\\uC124\\uC815-\\uD544\\uC218\",children:[(0,e.jsx)(n.a,{href:\"#nextconfigjs-\\uC124\\uC815-\\uD544\\uC218\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"next.config.js \\uC124\\uC815 \\uD544\\uC218\"]}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-javascript\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// next.config.js\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"module\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"exports\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property literal-property\",children:\"output\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'standalone'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsxs)(n.strong,{children:[(0,e.jsx)(n.code,{children:\"output: 'standalone'\"}),\"\\uC774 \\uC911\\uC694\\uD55C \\uC774\\uC720:\"]})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[\"Next.js\\uB294 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \",(0,e.jsx)(n.code,{children:\"node_modules\"}),\" \\uC804\\uCCB4\\uB97C \\uD544\\uC694\\uB85C \\uD568\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"standalone\"}),\" \\uBAA8\\uB4DC\\uB294 \\uC2E4\\uC81C\\uB85C \\uC0AC\\uC6A9\\uB418\\uB294 \\uD30C\\uC77C\\uB9CC \",(0,e.jsx)(n.code,{children:\".next/standalone\"}),\"\\uC5D0 \\uBCF5\\uC0AC\"]}),(0,e.jsx)(n.li,{children:\"\\uBD88\\uD544\\uC694\\uD55C \\uC758\\uC874\\uC131 \\uC81C\\uC678\\uB85C \\uC774\\uBBF8\\uC9C0 \\uD06C\\uAE30 \\uB300\\uD3ED \\uAC10\\uC18C\"}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"server.js\"}),\" \\uD30C\\uC77C\\uC774 \\uC790\\uB3D9 \\uC0DD\\uC131\\uB418\\uC5B4 \\uB3C5\\uB9BD \\uC2E4\\uD589 \\uAC00\\uB2A5\"]})]}),(0,e.jsxs)(n.h3,{id:\"docker-compose-\\uC608\\uC2DC\",children:[(0,e.jsx)(n.a,{href:\"#docker-compose-\\uC608\\uC2DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose \\uC608\\uC2DC\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"nextjs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3000:3000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` NODE_ENV=production\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" NEXT_PUBLIC_API_URL=https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`//api.example.com\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"react--vite\",children:[(0,e.jsx)(n.a,{href:\"#react--vite\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"React + Vite\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-1\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-1\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD5C\\uC801\\uD654\\uB41C Dockerfile\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC758\\uC874\\uC131 \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC18C\\uC2A4 \\uCF54\\uB4DC \\uBCF5\\uC0AC \\uBC0F \\uBE4C\\uB4DC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production Stage (nginx)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" nginx:alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" runner\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# nginx \\uC124\\uC815 \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" nginx.conf /etc/nginx/conf.d/default.conf\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uBE4C\\uB4DC\\uB41C \\uD30C\\uC77C \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /app/dist /usr/share/nginx/html\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 80\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"nginx\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"-g\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"daemon off;\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"nginxconf\",children:[(0,e.jsx)(n.a,{href:\"#nginxconf\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"nginx.conf\"]}),(0,e.jsx)(n.pre,{className:\"language-nginx\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-nginx\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token directive\",children:(0,e.jsx)(n.span,{className:\"token keyword\",children:\"server\"})}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"listen\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"80\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"server_name\"}),\" _\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"root\"}),\" /usr/share/nginx/html\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"index\"}),\" index.html\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# SPA routing \\uCC98\\uB9AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"location\"}),\" /\"]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"try_files\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$uri\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$uri\"}),\"/ /index.html\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC815\\uC801 \\uD30C\\uC77C \\uCE90\\uC2F1\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"location\"}),\" ~* \\\\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$\"]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"expires\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1y\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"add_header\"}),\" Cache-Control \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"public, immutable\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# gzip \\uC555\\uCD95\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"gzip\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"on\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"gzip_types\"}),\" text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"dockerignore\",children:[(0,e.jsx)(n.a,{href:\"#dockerignore\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\".dockerignore\"]}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`node_modules\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`dist\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.env\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.env.local\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.git\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.vscode\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`*.md\n`})]})}),(0,e.jsxs)(n.h3,{id:\"docker-compose-\\uC608\\uC2DC-1\",children:[(0,e.jsx)(n.a,{href:\"#docker-compose-\\uC608\\uC2DC-1\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose \\uC608\\uC2DC\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"react-app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"args\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" VITE_API_URL=https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`//api.example.com\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'80:80'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"\\uD658\\uACBD-\\uBCC0\\uC218-\\uBE4C\\uB4DC-\\uC2DC-\\uC8FC\\uC785\",children:[(0,e.jsx)(n.a,{href:\"#\\uD658\\uACBD-\\uBCC0\\uC218-\\uBE4C\\uB4DC-\\uC2DC-\\uC8FC\\uC785\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uD658\\uACBD \\uBCC0\\uC218 \\uBE4C\\uB4DC \\uC2DC \\uC8FC\\uC785\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage\\uC5D0 \\uCD94\\uAC00\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ARG\"}),\" VITE_API_URL\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" VITE_API_URL=\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$VITE_API_URL\"})]}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"expressjs\",children:[(0,e.jsx)(n.a,{href:\"#expressjs\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Express.js\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-2\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-2\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD5C\\uC801\\uD654\\uB41C Dockerfile\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage (TypeScript \\uC0AC\\uC6A9 \\uC2DC)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC758\\uC874\\uC131 \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC18C\\uC2A4 \\uBCF5\\uC0AC \\uBC0F \\uBE4C\\uB4DC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" runner\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# non-root \\uC720\\uC800\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" addgroup -g 1001 -S nodejs\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" adduser -S nodejs -u 1001\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD504\\uB85C\\uB355\\uC158 \\uC758\\uC874\\uC131\\uB9CC \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci --only=production && npm cache clean --force\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uBE4C\\uB4DC\\uB41C \\uD30C\\uC77C \\uBCF5\\uC0AC (TypeScript\\uC778 \\uACBD\\uC6B0)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--chown\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"nodejs:nodejs\"})]}),\" /app/dist ./dist\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uB610\\uB294 JavaScript \\uD504\\uB85C\\uC81D\\uD2B8\\uC778 \\uACBD\\uC6B0\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# COPY --chown=nodejs:nodejs ./src ./src\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" nodejs\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 3000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD5EC\\uC2A4\\uCCB4\\uD06C\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"5s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" node -e \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"require('http').get('http://localhost:3000/health', (r) => {process.exit(r.statusCode === 200 ? 0 : 1)})\"`})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dist/index.js\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"javascript-\\uD504\\uB85C\\uC81D\\uD2B8\\uC6A9-\\uBE4C\\uB4DC-\\uBD88\\uD544\\uC694\",children:[(0,e.jsx)(n.a,{href:\"#javascript-\\uD504\\uB85C\\uC81D\\uD2B8\\uC6A9-\\uBE4C\\uB4DC-\\uBD88\\uD544\\uC694\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"JavaScript \\uD504\\uB85C\\uC81D\\uD2B8\\uC6A9 (\\uBE4C\\uB4DC \\uBD88\\uD544\\uC694)\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" addgroup -g 1001 -S nodejs && \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token instruction\",children:\"    adduser -S nodejs -u 1001\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci --only=production && npm cache clean --force\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--chown\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"nodejs:nodejs\"})]}),\" . .\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" nodejs\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 3000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"5s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" node -e \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"require('http').get('http://localhost:3000/health', (r) => {process.exit(r.statusCode === 200 ? 0 : 1)})\"`})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"src/index.js\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"docker-compose-db-\\uD3EC\\uD568\",children:[(0,e.jsx)(n.a,{href:\"#docker-compose-db-\\uD3EC\\uD568\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose (DB \\uD3EC\\uD568)\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"api\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3000:3000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` NODE_ENV=production\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` DB_HOST=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` DB_PORT=5432\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` DB_NAME=myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` DB_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` DB_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"depends_on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` service_healthy\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_DB=myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" postgres_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD-SHELL'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'pg_isready -U postgres'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 5s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"nestjs\",children:[(0,e.jsx)(n.a,{href:\"#nestjs\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"NestJS\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-3\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-3\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD5C\\uC801\\uD654\\uB41C Dockerfile\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Development Dependencies\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" development\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" production\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# non-root \\uC720\\uC800\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" addgroup -g 1001 -S nodejs && \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token instruction\",children:\"    adduser -S nestjs -u 1001\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD504\\uB85C\\uB355\\uC158 \\uC758\\uC874\\uC131\\uB9CC \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci --only=production && npm cache clean --force\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uBE4C\\uB4DC\\uB41C \\uD30C\\uC77C \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--chown\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"nestjs:nodejs\"})]}),\" /app/dist ./dist\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" nestjs\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 3000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"10s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" node -e \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"require('http').get('http://localhost:3000/health', (r) => {process.exit(r.statusCode === 200 ? 0 : 1)})\"`})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dist/main.js\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"docker-compose-redis--postgresql\",children:[(0,e.jsx)(n.a,{href:\"#docker-compose-redis--postgresql\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose (Redis + PostgreSQL)\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"nestjs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"target\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` production\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3000:3000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` NODE_ENV=production\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" DATABASE_URL=postgresql\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"password@postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`5432/nestdb\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` REDIS_HOST=redis\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` REDIS_PORT=6379\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"depends_on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` service_healthy\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` service_healthy\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_DB=nestdb\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" postgres_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD-SHELL'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'pg_isready -U postgres'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 5s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" redis\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"7\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'redis-cli'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'ping'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 3s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" redis_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/data\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"\\uAC1C\\uBC1C-\\uD658\\uACBD\\uC6A9-docker-composedevyml\",children:[(0,e.jsx)(n.a,{href:\"#\\uAC1C\\uBC1C-\\uD658\\uACBD\\uC6A9-docker-composedevyml\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uAC1C\\uBC1C \\uD658\\uACBD\\uC6A9 docker-compose.dev.yml\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"nestjs-dev\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"target\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` development\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3000:3000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'9229:9229'\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Debug port\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" .\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/app\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` /app/node_modules\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` NODE_ENV=development\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" DATABASE_URL=postgresql\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"password@postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`5432/nestdb\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"command\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" npm run start\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`dev\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"depends_on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` postgres\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_DB=nestdb\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'5432:5432'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" postgres_dev_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres_dev_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"fastapi-python\",children:[(0,e.jsx)(n.a,{href:\"#fastapi-python\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"FastAPI (Python)\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-4\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD5C\\uC801\\uD654\\uB41C Dockerfile\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" python:3.11-slim \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC2DC\\uC2A4\\uD15C \\uC758\\uC874\\uC131\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" apt-get update && \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"    apt-get install -y --no-install-recommends gcc && \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token instruction\",children:\"    rm -rf /var/lib/apt/lists/*\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Python \\uC758\\uC874\\uC131 \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" requirements.txt .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" pip install --user --no-cache-dir -r requirements.txt\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" python:3.11-slim \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" runner\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# non-root \\uC720\\uC800\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" groupadd -r appuser && useradd -r -g appuser appuser\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# builder\\uC5D0\\uC11C \\uC124\\uCE58\\uB41C \\uD328\\uD0A4\\uC9C0 \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /root/.local /home/appuser/.local\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# PATH\\uC5D0 \\uCD94\\uAC00\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" PATH=/home/appuser/.local/bin:\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$PATH\"})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC18C\\uC2A4 \\uCF54\\uB4DC \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--chown\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"appuser:appuser\"})]}),\" . .\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" appuser\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 8000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD5EC\\uC2A4\\uCCB4\\uD06C\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"5s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" python -c \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"import urllib.request; urllib.request.urlopen('http://localhost:8000/health')\"`})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"uvicorn\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"main:app\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--host\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"0.0.0.0\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--port\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"8000\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"poetry-\\uC0AC\\uC6A9-\\uC2DC\",children:[(0,e.jsx)(n.a,{href:\"#poetry-\\uC0AC\\uC6A9-\\uC2DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Poetry \\uC0AC\\uC6A9 \\uC2DC\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" python:3.11-slim \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Poetry \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" pip install --no-cache-dir poetry\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# pyproject.toml\\uACFC poetry.lock \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" pyproject.toml poetry.lock ./\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC758\\uC874\\uC131\\uC744 requirements.txt\\uB85C export\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" poetry export -f requirements.txt --output requirements.txt --without-hashes\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC758\\uC874\\uC131 \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" pip install --user --no-cache-dir -r requirements.txt\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" python:3.11-slim \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" runner\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" groupadd -r appuser && useradd -r -g appuser appuser\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /root/.local /home/appuser/.local\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" PATH=/home/appuser/.local/bin:\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$PATH\"})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--chown\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"appuser:appuser\"})]}),\" ./app ./app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" appuser\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 8000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"5s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" python -c \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"import urllib.request; urllib.request.urlopen('http://localhost:8000/health')\"`})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"uvicorn\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"app.main:app\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--host\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"0.0.0.0\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--port\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"8000\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"requirementstxt-\\uC608\\uC2DC\",children:[(0,e.jsx)(n.a,{href:\"#requirementstxt-\\uC608\\uC2DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"requirements.txt \\uC608\\uC2DC\"]}),(0,e.jsx)(n.pre,{className:\"language-txt\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-txt\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`fastapi==0.104.1\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`uvicorn[standard]==0.24.0\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`pydantic==2.5.0\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`sqlalchemy==2.0.23\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`alembic==1.12.1\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`asyncpg==0.29.0\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`redis==5.0.1\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`python-jose[cryptography]==3.3.0\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`passlib[bcrypt]==1.7.4\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`python-multipart==0.0.6\n`})]})}),(0,e.jsxs)(n.h3,{id:\"docker-compose-postgresql--redis\",children:[(0,e.jsx)(n.a,{href:\"#docker-compose-postgresql--redis\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose (PostgreSQL + Redis)\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"fastapi\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'8000:8000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" DATABASE_URL=postgresql+asyncpg\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"password@postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`5432/fastapi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" REDIS_URL=redis\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//redis\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`6379/0\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"depends_on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` service_healthy\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` service_healthy\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_DB=fastapi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" postgres_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD-SHELL'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'pg_isready -U postgres'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 5s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" redis\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"7\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'redis-cli'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'ping'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 3s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" redis_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/data\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"\\uAC1C\\uBC1C-\\uD658\\uACBD\\uC6A9-\\uC124\\uC815\",children:[(0,e.jsx)(n.a,{href:\"#\\uAC1C\\uBC1C-\\uD658\\uACBD\\uC6A9-\\uC124\\uC815\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uAC1C\\uBC1C \\uD658\\uACBD\\uC6A9 \\uC124\\uC815\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"fastapi-dev\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'8000:8000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" ./app\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/app/app\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` ENVIRONMENT=development\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" DATABASE_URL=postgresql+asyncpg\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"password@postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`5432/fastapi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"command\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" uvicorn app.main\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"app \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"host 0.0.0.0 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"port 8000 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`reload\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"depends_on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` postgres\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_DB=fastapi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'5432:5432'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" postgres_dev_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres_dev_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"\\uACF5\\uD1B5-\\uCD5C\\uC801\\uD654-\\uD301\",children:[(0,e.jsx)(n.a,{href:\"#\\uACF5\\uD1B5-\\uCD5C\\uC801\\uD654-\\uD301\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uACF5\\uD1B5 \\uCD5C\\uC801\\uD654 \\uD301\"]}),(0,e.jsxs)(n.h3,{id:\"1-\\uBE4C\\uB4DC-\\uC2DC\\uAC04-\\uB2E8\\uCD95\",children:[(0,e.jsx)(n.a,{href:\"#1-\\uBE4C\\uB4DC-\\uC2DC\\uAC04-\\uB2E8\\uCD95\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. \\uBE4C\\uB4DC \\uC2DC\\uAC04 \\uB2E8\\uCD95\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\uBCD1\\uB82C \\uBE4C\\uB4DC \\uD65C\\uC131\\uD654:\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Docker BuildKit \\uC0AC\\uC6A9\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"DOCKER_BUILDKIT\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" build \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-t\"}),\" myapp \",(0,e.jsx)(n.span,{className:\"token class-name builtin\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uB610\\uB294 \\uD658\\uACBD \\uBCC0\\uC218\\uB85C \\uC124\\uC815\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token class-name builtin\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"DOCKER_BUILDKIT\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\uBA40\\uD2F0 \\uD50C\\uB7AB\\uD3FC \\uBE4C\\uB4DC:\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# arm64, amd64 \\uB3D9\\uC2DC \\uBE4C\\uB4DC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" buildx build \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"--platform\"}),\" linux/amd64,linux/arm64 \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-t\"}),\" myapp:latest \",(0,e.jsx)(n.span,{className:\"token class-name builtin\",children:\".\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"2-\\uC774\\uBBF8\\uC9C0-\\uC2A4\\uCE94-\\uBCF4\\uC548\",children:[(0,e.jsx)(n.a,{href:\"#2-\\uC774\\uBBF8\\uC9C0-\\uC2A4\\uCE94-\\uBCF4\\uC548\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. \\uC774\\uBBF8\\uC9C0 \\uC2A4\\uCE94 (\\uBCF4\\uC548)\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Trivy \\uC0AC\\uC6A9:\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC774\\uBBF8\\uC9C0 \\uC2A4\\uCE94\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`trivy image myapp:latest\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC2EC\\uAC01\\uB3C4 HIGH \\uC774\\uC0C1\\uB9CC \\uD45C\\uC2DC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"trivy image \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"--severity\"}),` HIGH,CRITICAL myapp:latest\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Docker Scout (Docker Desktop \\uD3EC\\uD568):\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),` scout cves myapp:latest\n`]})})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"3-\\uB808\\uC774\\uC5B4-\\uD655\\uC778\",children:[(0,e.jsx)(n.a,{href:\"#3-\\uB808\\uC774\\uC5B4-\\uD655\\uC778\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. \\uB808\\uC774\\uC5B4 \\uD655\\uC778\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uB808\\uC774\\uC5B4\\uBCC4 \\uD06C\\uAE30 \\uD655\\uC778\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"history\"}),` myapp:latest\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC0C1\\uC138 \\uC815\\uBCF4\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),` inspect myapp:latest\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"4-\\uBD88\\uD544\\uC694\\uD55C-\\uD30C\\uC77C-\\uC81C\\uAC70\",children:[(0,e.jsx)(n.a,{href:\"#4-\\uBD88\\uD544\\uC694\\uD55C-\\uD30C\\uC77C-\\uC81C\\uAC70\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"4. \\uBD88\\uD544\\uC694\\uD55C \\uD30C\\uC77C \\uC81C\\uAC70\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uCE90\\uC2DC \\uC0AD\\uC81C\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" apt-get update && \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"    apt-get install -y package && \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token instruction\",children:\"    rm -rf /var/lib/apt/lists/*\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# npm \\uCE90\\uC2DC \\uC0AD\\uC81C\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci && npm cache clean --force\"]}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"5-\\uD658\\uACBD\\uBCC4-\\uBE4C\\uB4DC\",children:[(0,e.jsx)(n.a,{href:\"#5-\\uD658\\uACBD\\uBCC4-\\uBE4C\\uB4DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"5. \\uD658\\uACBD\\uBCC4 \\uBE4C\\uB4DC\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uAC1C\\uBC1C \\uD658\\uACBD\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker-compose\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-f\"}),\" docker-compose.yml \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-f\"}),` docker-compose.dev.yml up\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD504\\uB85C\\uB355\\uC158 \\uD658\\uACBD\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker-compose\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-f\"}),\" docker-compose.yml \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-f\"}),` docker-compose.prod.yml up\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"\\uC8FC\\uC758\\uC0AC\\uD56D\",children:[(0,e.jsx)(n.a,{href:\"#\\uC8FC\\uC758\\uC0AC\\uD56D\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC8FC\\uC758\\uC0AC\\uD56D\"]}),(0,e.jsxs)(n.h3,{id:\"1-secrets-\\uAD00\\uB9AC\",children:[(0,e.jsx)(n.a,{href:\"#1-secrets-\\uAD00\\uB9AC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. Secrets \\uAD00\\uB9AC\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u274C \\uC808\\uB300 \\uD558\\uC9C0 \\uB9D0 \\uAC83:\"})}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC774\\uBBF8\\uC9C0\\uC5D0 secrets \\uD3EC\\uD568\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" .env .\"]}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u2705 \\uC62C\\uBC14\\uB978 \\uBC29\\uBC95:\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uB7F0\\uD0C0\\uC784\\uC5D0 \\uD658\\uACBD \\uBCC0\\uC218\\uB85C \\uC8FC\\uC785\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" run \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-e\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"DB_PASSWORD\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`secret myapp\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uB610\\uB294 Docker Secrets \\uC0AC\\uC6A9:\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# docker-compose.yml\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secrets\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` db_password\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secrets\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"db_password\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"file\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ./secrets/db_password.txt\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"2-\\uD5EC\\uC2A4\\uCCB4\\uD06C-\\uD544\\uC218\",children:[(0,e.jsx)(n.a,{href:\"#2-\\uD5EC\\uC2A4\\uCCB4\\uD06C-\\uD544\\uC218\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. \\uD5EC\\uC2A4\\uCCB4\\uD06C \\uD544\\uC218\"]}),(0,e.jsx)(n.p,{children:\"\\uBAA8\\uB4E0 \\uD504\\uB85C\\uB355\\uC158 \\uCEE8\\uD14C\\uC774\\uB108\\uC5D0 \\uD5EC\\uC2A4\\uCCB4\\uD06C \\uCD94\\uAC00:\"}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"5s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" curl -f http://localhost:3000/health || exit 1\"]}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"3-\\uB85C\\uADF8-\\uAD00\\uB9AC\",children:[(0,e.jsx)(n.a,{href:\"#3-\\uB85C\\uADF8-\\uAD00\\uB9AC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. \\uB85C\\uADF8 \\uAD00\\uB9AC\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"stdout/stderr\\uB85C \\uB85C\\uADF8 \\uCD9C\\uB825:\"})}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-javascript\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Express.js\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Server started'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"error\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Error occurred'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uCEE8\\uD14C\\uC774\\uB108 \\uB85C\\uADF8 \\uD655\\uC778:\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" logs \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-f\"}),` container-name\n`]})})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"\\uC2E4\\uC804-\\uBC30\\uD3EC-\\uC6CC\\uD06C\\uD50C\\uB85C\\uC6B0\",children:[(0,e.jsx)(n.a,{href:\"#\\uC2E4\\uC804-\\uBC30\\uD3EC-\\uC6CC\\uD06C\\uD50C\\uB85C\\uC6B0\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC2E4\\uC804 \\uBC30\\uD3EC \\uC6CC\\uD06C\\uD50C\\uB85C\\uC6B0\"]}),(0,e.jsxs)(n.h3,{id:\"1-\\uB85C\\uCEEC-\\uBE4C\\uB4DC--\\uD14C\\uC2A4\\uD2B8\",children:[(0,e.jsx)(n.a,{href:\"#1-\\uB85C\\uCEEC-\\uBE4C\\uB4DC--\\uD14C\\uC2A4\\uD2B8\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. \\uB85C\\uCEEC \\uBE4C\\uB4DC & \\uD14C\\uC2A4\\uD2B8\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uBE4C\\uB4DC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" build \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-t\"}),\" myapp:latest \",(0,e.jsx)(n.span,{className:\"token class-name builtin\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC2E4\\uD589\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" run \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-p\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),`:3000 myapp:latest\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD5EC\\uC2A4\\uCCB4\\uD06C \\uD655\\uC778\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"curl\"}),` http://localhost:3000/health\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"2-cicd-github-actions-\\uC608\\uC2DC\",children:[(0,e.jsx)(n.a,{href:\"#2-cicd-github-actions-\\uC608\\uC2DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. CI/CD (GitHub Actions \\uC608\\uC2DC)\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Docker Build and Push\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"branches\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"main\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"jobs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"runs-on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ubuntu\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`latest\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"steps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` actions/checkout@v3\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Set up Docker Buildx\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker/setup\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"buildx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`action@v2\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Login to Docker Hub\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker/login\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`action@v2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"with\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"username\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" $\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" secrets.DOCKER_USERNAME \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"password\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" $\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" secrets.DOCKER_PASSWORD \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Build and push\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker/build\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"push\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`action@v4\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"with\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tags\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" username/myapp\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`latest\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"cache-from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` type=gha\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"cache-to\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" type=gha\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`mode=max\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Scan image\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"run\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token string scalar\",children:`\n`})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`          docker run --rm \\\\\n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`            -v /var/run/docker.sock:/var/run/docker.sock \\\\\n`})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token string scalar\",children:\"            aquasec/trivy image username/myapp:latest\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"3-\\uBC30\\uD3EC-kubernetes-\\uC608\\uC2DC\",children:[(0,e.jsx)(n.a,{href:\"#3-\\uBC30\\uD3EC-kubernetes-\\uC608\\uC2DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. \\uBC30\\uD3EC (Kubernetes \\uC608\\uC2DC)\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` apps/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Deployment\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"replicas\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"selector\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"matchLabels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"template\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"labels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" username/myapp\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`latest\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containerPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"livenessProbe\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"httpGet\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /health\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"initialDelaySeconds\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"periodSeconds\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"readinessProbe\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"httpGet\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /health\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"initialDelaySeconds\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"periodSeconds\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"requests\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"memory\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'256Mi'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"cpu\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'250m'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"limits\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"memory\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'512Mi'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"cpu\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'500m'\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"\\uB9C8\\uCE58\\uBA70\",children:[(0,e.jsx)(n.a,{href:\"#\\uB9C8\\uCE58\\uBA70\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uB9C8\\uCE58\\uBA70\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCCB4\\uD06C\\uB9AC\\uC2A4\\uD2B8\",children:[(0,e.jsx)(n.a,{href:\"#\\uCCB4\\uD06C\\uB9AC\\uC2A4\\uD2B8\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCCB4\\uD06C\\uB9AC\\uC2A4\\uD2B8\"]}),(0,e.jsxs)(n.p,{children:[\"\\u2705 \",(0,e.jsx)(n.strong,{children:\"\\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0 \\uBE4C\\uB4DC \\uC0AC\\uC6A9\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\"\\uB808\\uC774\\uC5B4 \\uCE90\\uC2F1 \\uCD5C\\uC801\\uD654\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\"non-root \\uC720\\uC800 \\uC2E4\\uD589\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\".dockerignore \\uC791\\uC131\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\"\\uD5EC\\uC2A4\\uCCB4\\uD06C \\uC124\\uC815\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\"\\uBCF4\\uC548 \\uC2A4\\uCE94 \\uC2E4\\uD589\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\"\\uC774\\uBBF8\\uC9C0 \\uD06C\\uAE30 \\uD655\\uC778\"})]}),(0,e.jsxs)(n.h3,{id:\"\\uCD94\\uAC00-\\uD559\\uC2B5-\\uC790\\uB8CC\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD94\\uAC00-\\uD559\\uC2B5-\\uC790\\uB8CC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD94\\uAC00 \\uD559\\uC2B5 \\uC790\\uB8CC\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://docs.docker.com/develop/dev-best-practices/\",children:\"Docker \\uACF5\\uC2DD \\uBB38\\uC11C - Best Practices\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/deployment#docker-image\",children:\"Next.js Docker \\uAC00\\uC774\\uB4DC\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://aquasecurity.github.io/trivy/\",children:\"Trivy \\uBB38\\uC11C\"})})]}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\uC791\\uC131\\uC77C:\"}),\" 2025-11-17 \",(0,e.jsx)(n.strong,{children:\"\\uB9C8\\uC9C0\\uB9C9 \\uC218\\uC815:\"}),\" 2025-11-17\"]})]})}}var w=f;return b;})();\n;return Component;","toc":[{"value":"","url":"#","depth":2},{"value":"Dockerfile   ","url":"#dockerfile---","depth":2},{"value":"1.   ","url":"#1---","depth":3},{"value":"2.   ","url":"#2---","depth":3},{"value":"3.  ","url":"#3--","depth":3},{"value":"4. .dockerignore ","url":"#4-dockerignore-","depth":3},{"value":"Next.js (App Router)","url":"#nextjs-app-router","depth":2},{"value":" Dockerfile","url":"#-dockerfile","depth":3},{"value":"next.config.js  ","url":"#nextconfigjs--","depth":3},{"value":"Docker Compose ","url":"#docker-compose-","depth":3},{"value":"React + Vite","url":"#react--vite","depth":2},{"value":" Dockerfile","url":"#-dockerfile","depth":3},{"value":"nginx.conf","url":"#nginxconf","depth":3},{"value":".dockerignore","url":"#dockerignore","depth":3},{"value":"Docker Compose ","url":"#docker-compose-","depth":3},{"value":"    ","url":"#----","depth":3},{"value":"Express.js","url":"#expressjs","depth":2},{"value":" Dockerfile","url":"#-dockerfile","depth":3},{"value":"JavaScript  ( )","url":"#javascript---","depth":3},{"value":"Docker Compose (DB )","url":"#docker-compose-db-","depth":3},{"value":"NestJS","url":"#nestjs","depth":2},{"value":" Dockerfile","url":"#-dockerfile","depth":3},{"value":"Docker Compose (Redis + PostgreSQL)","url":"#docker-compose-redis--postgresql","depth":3},{"value":"  docker-compose.dev.yml","url":"#--docker-composedevyml","depth":3},{"value":"FastAPI (Python)","url":"#fastapi-python","depth":2},{"value":" Dockerfile","url":"#-dockerfile","depth":3},{"value":"Poetry  ","url":"#poetry--","depth":3},{"value":"requirements.txt ","url":"#requirementstxt-","depth":3},{"value":"Docker Compose (PostgreSQL + Redis)","url":"#docker-compose-postgresql--redis","depth":3},{"value":"  ","url":"#--","depth":3},{"value":"  ","url":"#--","depth":2},{"value":"1.   ","url":"#1---","depth":3},{"value":"2.   ()","url":"#2---","depth":3},{"value":"3.  ","url":"#3--","depth":3},{"value":"4.   ","url":"#4---","depth":3},{"value":"5.  ","url":"#5--","depth":3},{"value":"","url":"#","depth":2},{"value":"1. Secrets ","url":"#1-secrets-","depth":3},{"value":"2.  ","url":"#2--","depth":3},{"value":"3.  ","url":"#3--","depth":3},{"value":"  ","url":"#--","depth":2},{"value":"1.   & ","url":"#1----","depth":3},{"value":"2. CI/CD (GitHub Actions )","url":"#2-cicd-github-actions-","depth":3},{"value":"3.  (Kubernetes )","url":"#3--kubernetes-","depth":3},{"value":"","url":"#","depth":2},{"value":"","url":"#","depth":3},{"value":"  ","url":"#--","depth":3}],"frontMatter":{"readingTime":{"text":"20 min read","minutes":19.895,"time":1193700,"words":3979},"slug":"doc/dockerfile-best-practices-by-framework","fileName":"doc/dockerfile-best-practices-by-framework.mdx","title":" Dockerfile  :   ","date":"2025-11-17T00:00:00.000Z","tags":["docker","dockerfile","nextjs","react","nodejs","python","devops"],"draft":false,"summary":"Next.js, React, Express, NestJS, FastAPI     Dockerfile   , ,       .","images":[],"layout":"PostSimple","canonicalUrl":"https://bulhwi.github.io/blog/dockerfile-best-practices-by-framework"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"bulhwi.github.io","avatar":"/static/images/Avatar-Maker.png","occupation":null,"company":null,"email":null,"twitter":null,"linkedin":null,"github":"https://github.com/bulhwi","date":null}],"prev":{"title":"Claude Code       ","date":"2025-11-16T22:30:00.000Z","lastmod":"2025-11-16","tags":["claude-code","optimization","cost-saving","performance","productivity"],"draft":false,"summary":"Claude Code API     .  ,  ,    70%  .","layout":"PostSimple","slug":"doc/claude-code-performance-cost-optimization"},"next":{"title":"Claude Code Plan Mode   ","date":"2025-11-17T00:00:00.000Z","tags":["claude-code","ai","productivity","workflow"],"draft":false,"summary":"Claude Code Plan Mode            .","images":[],"layout":"PostSimple","canonicalUrl":"https://bulhwi.github.io/blog/claude-code-plan-mode-guide","slug":"doc/claude-code-plan-mode-guide"}},"__N_SSG":true}