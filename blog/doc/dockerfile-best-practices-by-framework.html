<!DOCTYPE html><html lang="en" class="scroll-smooth"><head><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if("system"===e||(!e&&true)){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else if(e) d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><title>실전 Dockerfile 작성 패턴: 프레임워크별 베스트 프랙티스</title><meta name="robots" content="follow, index"/><meta name="description" content="Next.js, React, Express, NestJS, FastAPI 등 주요 프레임워크별로 최적화된 Dockerfile 작성법과 멀티스테이지 빌드, 보안, 캐시 최적화 전략을 실전 예시와 함께 정리했습니다."/><meta property="og:url" content="https://bulhwi.github.io/blog/doc/dockerfile-best-practices-by-framework"/><meta property="og:type" content="article"/><meta property="og:site_name" content="bulhwi.github.io"/><meta property="og:description" content="Next.js, React, Express, NestJS, FastAPI 등 주요 프레임워크별로 최적화된 Dockerfile 작성법과 멀티스테이지 빌드, 보안, 캐시 최적화 전략을 실전 예시와 함께 정리했습니다."/><meta property="og:title" content="실전 Dockerfile 작성 패턴: 프레임워크별 베스트 프랙티스"/><meta property="og:image" content="https://bulhwi.github.io/static/images/Avatar-Maker.png"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/Twitter"/><meta name="twitter:title" content="실전 Dockerfile 작성 패턴: 프레임워크별 베스트 프랙티스"/><meta name="twitter:description" content="Next.js, React, Express, NestJS, FastAPI 등 주요 프레임워크별로 최적화된 Dockerfile 작성법과 멀티스테이지 빌드, 보안, 캐시 최적화 전략을 실전 예시와 함께 정리했습니다."/><meta name="twitter:image" content="https://bulhwi.github.io/static/images/Avatar-Maker.png"/><link rel="canonical" href="https://bulhwi.github.io/blog/dockerfile-best-practices-by-framework"/><meta property="article:published_time" content="2025-11-17T00:00:00.000Z"/><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "Article",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://bulhwi.github.io/blog/doc/dockerfile-best-practices-by-framework"
  },
  "headline": "실전 Dockerfile 작성 패턴: 프레임워크별 베스트 프랙티스",
  "image": [
    {
      "@type": "ImageObject",
      "url": "https://bulhwi.github.io/static/images/Avatar-Maker.png"
    }
  ],
  "datePublished": "2025-11-17T00:00:00.000Z",
  "dateModified": "2025-11-17T00:00:00.000Z",
  "author": {
    "@type": "Person",
    "name": "bulhwi"
  },
  "publisher": {
    "@type": "Organization",
    "name": "bulhwi",
    "logo": {
      "@type": "ImageObject",
      "url": "https://bulhwi.github.io/static/images/Avatar-Maker.png"
    }
  },
  "description": "Next.js, React, Express, NestJS, FastAPI 등 주요 프레임워크별로 최적화된 Dockerfile 작성법과 멀티스테이지 빌드, 보안, 캐시 최적화 전략을 실전 예시와 함께 정리했습니다."
}</script><meta name="next-head-count" content="20"/><link rel="apple-touch-icon" sizes="76x76" href="/static/images/Avatar-Maker.png"/><link rel="icon" type="image/png" sizes="32x32" href="/static/images/Avatar-Maker.png"/><link rel="icon" type="image/png" sizes="16x16" href="/static/images/Avatar-Maker.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><link rel="mask-icon" href="/static/favicons/safari-pinned-tab.svg" color="#5bbad5"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" media="(prefers-color-scheme: light)" content="#fff"/><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><link rel="preload" href="/_next/static/css/03c6804b1e6f7807.css" as="style"/><link rel="stylesheet" href="/_next/static/css/03c6804b1e6f7807.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/_next/static/chunks/webpack-0133a3f48e11d4df.js" defer=""></script><script src="/_next/static/chunks/main-27d3c54028b80e36.js" defer=""></script><script src="/_next/static/chunks/pages/_app-45569a3182c03883.js" defer=""></script><script src="/_next/static/chunks/675-4efee9c9b489918b.js" defer=""></script><script src="/_next/static/chunks/410-126bb4b3a7c18944.js" defer=""></script><script src="/_next/static/chunks/712-f1c949e76e5e6565.js" defer=""></script><script src="/_next/static/chunks/pages/blog/%5B...slug%5D-8ab66ff6ebabec4c.js" defer=""></script><script src="/_next/static/HXhK500Kz7z-1paeCWXJG/_buildManifest.js" defer=""></script><script src="/_next/static/HXhK500Kz7z-1paeCWXJG/_ssgManifest.js" defer=""></script><script src="/_next/static/HXhK500Kz7z-1paeCWXJG/_middlewareManifest.js" defer=""></script></head><body class="bg-white text-black antialiased dark:bg-gray-900 dark:text-white"><div id="__next" data-reactroot=""><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex h-screen flex-col justify-between"><header class="flex items-center justify-between py-10"><div><a aria-label="bulhwi.github.io" href="/"><div class="flex items-center justify-between"><div class="hidden h-6 text-2xl font-semibold sm:block">bulhwi.github.io</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/blog">Blog</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/tags">Tags</a><a class="p-1 font-medium text-gray-900 dark:text-gray-100 sm:p-4" href="/about">About</a></div><button aria-label="Toggle Dark Mode" type="button" class="ml-1 mr-1 h-8 w-8 rounded p-1 sm:ml-4"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path></svg></button><div class="sm:hidden"><button type="button" class="ml-1 mr-1 h-8 w-8 rounded py-1" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed top-0 left-0 z-10 h-full w-full transform bg-gray-200 opacity-95 duration-300 ease-in-out dark:bg-gray-800 translate-x-full"><div class="flex justify-end"><button type="button" class="mr-5 mt-11 h-8 w-8 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-900 dark:text-gray-100"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg></button></div><nav class="fixed mt-8 h-full"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/blog">Blog</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-900 dark:text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="mx-auto max-w-3xl px-4 sm:px-6 xl:max-w-5xl xl:px-0"><div class="fixed right-8 bottom-8 hidden flex-col gap-3 md:hidden"><button aria-label="Scroll To Comment" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg></button><button aria-label="Scroll To Top" type="button" class="rounded-full bg-gray-200 p-2 text-gray-500 transition-all hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600"><svg class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M3.293 9.707a1 1 0 010-1.414l6-6a1 1 0 011.414 0l6 6a1 1 0 01-1.414 1.414L11 5.414V17a1 1 0 11-2 0V5.414L4.707 9.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path></svg></button></div><article><div><header><div class="space-y-1 border-b border-gray-200 pb-10 text-center dark:border-gray-700"><dl><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-500 dark:text-gray-400"><time dateTime="2025-11-17T00:00:00.000Z">2025년 11월 17일</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-900 dark:text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">실전 Dockerfile 작성 패턴: 프레임워크별 베스트 프랙티스</h1></div></div></header><div class="divide-y divide-gray-200 pb-8 dark:divide-gray-700 xl:divide-y-0 " style="grid-template-rows:auto 1fr"><div class="divide-y divide-gray-200 dark:divide-gray-700 xl:col-span-3 xl:row-span-2 xl:pb-0"><div class="prose max-w-none pt-10 pb-8 dark:prose-dark"><h2 id="목차"><a href="#목차" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>목차</h2><ol><li><a href="#dockerfile-%EC%9E%91%EC%84%B1-%EA%B8%B0%EB%B3%B8-%EC%9B%90%EC%B9%99">Dockerfile 작성 기본 원칙</a></li><li><a href="#nextjs-app-router">Next.js (App Router)</a></li><li><a href="#react--vite">React + Vite</a></li><li><a href="#expressjs">Express.js</a></li><li><a href="#nestjs">NestJS</a></li><li><a href="#fastapi-python">FastAPI (Python)</a></li><li><a href="#%EA%B3%B5%ED%86%B5-%EC%B5%9C%EC%A0%81%ED%99%94-%ED%8C%81">공통 최적화 팁</a></li></ol><hr/><h2 id="dockerfile-작성-기본-원칙"><a href="#dockerfile-작성-기본-원칙" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Dockerfile 작성 기본 원칙</h2><h3 id="1-멀티스테이지-빌드-사용"><a href="#1-멀티스테이지-빌드-사용" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. 멀티스테이지 빌드 사용</h3><p>빌드 도구와 런타임을 분리해서 최종 이미지 크기를 대폭 줄입니다.</p><p><strong>Before (Single Stage):</strong></p><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> . .</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm install</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm run build</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;npm&quot;</span>, <span class="token string">&quot;start&quot;</span>]</span>
</span></code></pre></div><p><strong>After (Multi-Stage):</strong></p><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token comment"># Build stage</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine <span class="token keyword">AS</span> builder</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package*.json ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> . .</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm run build</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Production stage</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /app/dist ./dist</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package*.json ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci --only=production</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;node&quot;</span>, <span class="token string">&quot;dist/index.js&quot;</span>]</span>
</span></code></pre></div><p>멀티스테이지 빌드를 사용하면:</p><ul><li>빌드 도구(컴파일러, 개발 의존성)가 최종 이미지에 포함되지 않음</li><li>Alpine 베이스 이미지로 경량화</li><li>보안: 공격 표면 감소</li></ul><hr/><h3 id="2-레이어-캐싱-최적화"><a href="#2-레이어-캐싱-최적화" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. 레이어 캐싱 최적화</h3><p><strong>❌ 나쁜 예:</strong></p><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> . .</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm install</span>
</span></code></pre></div><p>package.json이 바뀌지 않아도 소스 코드만 바뀌면 <code>npm install</code> 재실행</p><p><strong>✅ 좋은 예:</strong></p><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package*.json ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm install</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> . .</span>
</span></code></pre></div><p>package.json이 바뀌지 않으면 캐시된 레이어 재사용</p><hr/><h3 id="3-보안-강화"><a href="#3-보안-강화" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3. 보안 강화</h3><ul><li><strong>non-root 유저 사용</strong></li><li><strong>Alpine 또는 Distroless 베이스 이미지</strong></li><li><strong>취약점 스캔</strong> (Trivy, Snyk)</li></ul><hr/><h3 id="4-dockerignore-필수"><a href="#4-dockerignore-필수" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>4. .dockerignore 필수</h3><div class="relative"><pre><code class="code-highlight"><span class="code-line">node_modules
</span><span class="code-line">npm-debug.log
</span><span class="code-line">.env
</span><span class="code-line">.git
</span><span class="code-line">.vscode
</span><span class="code-line">*.md
</span><span class="code-line">.DS_Store
</span><span class="code-line">dist
</span><span class="code-line">build
</span><span class="code-line">coverage
</span></code></pre></div><hr/><h2 id="nextjs-app-router"><a href="#nextjs-app-router" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Next.js (App Router)</h2><h3 id="최적화된-dockerfile"><a href="#최적화된-dockerfile" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>최적화된 Dockerfile</h3><p>Next.js 공식 예제를 기반으로 한 프로덕션 최적화 버전입니다.</p><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Dependencies Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine <span class="token keyword">AS</span> deps</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> apk add --no-cache libc6-compat</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># package.json과 lock 파일만 먼저 복사</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package.json package-lock.json* ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Builder Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine <span class="token keyword">AS</span> builder</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># deps에서 node_modules 복사</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">deps</span></span> /app/node_modules ./node_modules</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> . .</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 환경 변수 (빌드 시점에 필요한 경우)</span>
</span><span class="code-line"><span class="token comment"># ARG NEXT_PUBLIC_API_URL</span>
</span><span class="code-line"><span class="token comment"># ENV NEXT_PUBLIC_API_URL=$NEXT_PUBLIC_API_URL</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Next.js 텔레메트리 비활성화</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">ENV</span> NEXT_TELEMETRY_DISABLED 1</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 빌드 실행</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm run build</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Runner Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine <span class="token keyword">AS</span> runner</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">ENV</span> NODE_ENV production</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">ENV</span> NEXT_TELEMETRY_DISABLED 1</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># non-root 유저 생성</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> addgroup --system --gid 1001 nodejs</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> adduser --system --uid 1001 nextjs</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 필요한 파일만 복사</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /app/public ./public</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /app/.next/standalone ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /app/.next/static ./.next/static</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 유저 권한 설정</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">USER</span> nextjs</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 3000</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">ENV</span> PORT 3000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;node&quot;</span>, <span class="token string">&quot;server.js&quot;</span>]</span>
</span></code></pre></div><h3 id="nextconfigjs-설정-필수"><a href="#nextconfigjs-설정-필수" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>next.config.js 설정 필수</h3><div class="relative"><pre><code class="code-highlight language-javascript"><span class="code-line"><span class="token comment">// next.config.js</span>
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property literal-property">output</span><span class="token operator">:</span> <span class="token string">&#x27;standalone&#x27;</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre></div><p><strong><code>output: &#x27;standalone&#x27;</code>이 중요한 이유:</strong></p><ul><li>Next.js는 기본적으로 <code>node_modules</code> 전체를 필요로 함</li><li><code>standalone</code> 모드는 실제로 사용되는 파일만 <code>.next/standalone</code>에 복사</li><li>불필요한 의존성 제외로 이미지 크기 대폭 감소</li><li><code>server.js</code> 파일이 자동 생성되어 독립 실행 가능</li></ul><h3 id="docker-compose-예시"><a href="#docker-compose-예시" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Docker Compose 예시</h3><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">version</span><span class="token punctuation">:</span> <span class="token string">&#x27;3.8&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">services</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">nextjs</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">build</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">context</span><span class="token punctuation">:</span> .
</span><span class="code-line">      <span class="token atrule key">dockerfile</span><span class="token punctuation">:</span> Dockerfile
</span><span class="code-line">    <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;3000:3000&#x27;</span>
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> NODE_ENV=production
</span><span class="code-line">      <span class="token punctuation">-</span> NEXT_PUBLIC_API_URL=https<span class="token punctuation">:</span>//api.example.com
</span><span class="code-line">    <span class="token atrule key">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
</span></code></pre></div><hr/><h2 id="react--vite"><a href="#react--vite" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>React + Vite</h2><h3 id="최적화된-dockerfile-1"><a href="#최적화된-dockerfile-1" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>최적화된 Dockerfile</h3><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Build Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine <span class="token keyword">AS</span> builder</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 의존성 설치</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package.json package-lock.json* ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 소스 코드 복사 및 빌드</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> . .</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm run build</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Production Stage (nginx)</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> nginx:alpine <span class="token keyword">AS</span> runner</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># nginx 설정 복사</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> nginx.conf /etc/nginx/conf.d/default.conf</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 빌드된 파일 복사</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /app/dist /usr/share/nginx/html</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 80</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;nginx&quot;</span>, <span class="token string">&quot;-g&quot;</span>, <span class="token string">&quot;daemon off;&quot;</span>]</span>
</span></code></pre></div><h3 id="nginxconf"><a href="#nginxconf" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>nginx.conf</h3><div class="relative"><pre><code class="code-highlight language-nginx"><span class="code-line"><span class="token directive"><span class="token keyword">server</span></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">listen</span> <span class="token number">80</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">server_name</span> _</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token directive"><span class="token keyword">root</span> /usr/share/nginx/html</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">index</span> index.html</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment"># SPA routing 처리</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">location</span> /</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token directive"><span class="token keyword">try_files</span> <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.html</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment"># 정적 파일 캐싱</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">location</span> ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token directive"><span class="token keyword">expires</span> <span class="token number">1y</span></span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token directive"><span class="token keyword">add_header</span> Cache-Control <span class="token string">&quot;public, immutable&quot;</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token comment"># gzip 압축</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">gzip</span> <span class="token boolean">on</span></span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token directive"><span class="token keyword">gzip_types</span> text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre></div><h3 id="dockerignore"><a href="#dockerignore" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>.dockerignore</h3><div class="relative"><pre><code class="code-highlight"><span class="code-line">node_modules
</span><span class="code-line">dist
</span><span class="code-line">.env
</span><span class="code-line">.env.local
</span><span class="code-line">.git
</span><span class="code-line">.vscode
</span><span class="code-line">*.md
</span></code></pre></div><h3 id="docker-compose-예시-1"><a href="#docker-compose-예시-1" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Docker Compose 예시</h3><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">version</span><span class="token punctuation">:</span> <span class="token string">&#x27;3.8&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">services</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">react-app</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">build</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">context</span><span class="token punctuation">:</span> .
</span><span class="code-line">      <span class="token atrule key">dockerfile</span><span class="token punctuation">:</span> Dockerfile
</span><span class="code-line">      <span class="token atrule key">args</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> VITE_API_URL=https<span class="token punctuation">:</span>//api.example.com
</span><span class="code-line">    <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;80:80&#x27;</span>
</span><span class="code-line">    <span class="token atrule key">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
</span></code></pre></div><h3 id="환경-변수-빌드-시-주입"><a href="#환경-변수-빌드-시-주입" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>환경 변수 빌드 시 주입</h3><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token comment"># Build Stage에 추가</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">ARG</span> VITE_API_URL</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">ENV</span> VITE_API_URL=<span class="token variable">$VITE_API_URL</span></span>
</span></code></pre></div><hr/><h2 id="expressjs"><a href="#expressjs" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Express.js</h2><h3 id="최적화된-dockerfile-2"><a href="#최적화된-dockerfile-2" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>최적화된 Dockerfile</h3><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Build Stage (TypeScript 사용 시)</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine <span class="token keyword">AS</span> builder</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 의존성 설치</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package.json package-lock.json* ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 소스 복사 및 빌드</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> . .</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm run build</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Production Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine <span class="token keyword">AS</span> runner</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># non-root 유저</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> addgroup -g 1001 -S nodejs</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> adduser -S nodejs -u 1001</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 프로덕션 의존성만 설치</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package.json package-lock.json* ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci --only=production &amp;&amp; npm cache clean --force</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 빌드된 파일 복사 (TypeScript인 경우)</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span> <span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">nodejs:nodejs</span></span> /app/dist ./dist</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 또는 JavaScript 프로젝트인 경우</span>
</span><span class="code-line"><span class="token comment"># COPY --chown=nodejs:nodejs ./src ./src</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">USER</span> nodejs</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 3000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 헬스체크</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">HEALTHCHECK</span> <span class="token options"><span class="token property">--interval</span><span class="token punctuation">=</span><span class="token string">30s</span> <span class="token property">--timeout</span><span class="token punctuation">=</span><span class="token string">3s</span> <span class="token property">--start-period</span><span class="token punctuation">=</span><span class="token string">5s</span> <span class="token property">--retries</span><span class="token punctuation">=</span><span class="token string">3</span></span> <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">  <span class="token keyword">CMD</span> node -e <span class="token string">&quot;require(&#x27;http&#x27;).get(&#x27;http://localhost:3000/health&#x27;, (r) =&gt; {process.exit(r.statusCode === 200 ? 0 : 1)})&quot;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;node&quot;</span>, <span class="token string">&quot;dist/index.js&quot;</span>]</span>
</span></code></pre></div><h3 id="javascript-프로젝트용-빌드-불필요"><a href="#javascript-프로젝트용-빌드-불필요" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>JavaScript 프로젝트용 (빌드 불필요)</h3><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> addgroup -g 1001 -S nodejs &amp;&amp; <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">    adduser -S nodejs -u 1001</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package.json package-lock.json* ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci --only=production &amp;&amp; npm cache clean --force</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">nodejs:nodejs</span></span> . .</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">USER</span> nodejs</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 3000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">HEALTHCHECK</span> <span class="token options"><span class="token property">--interval</span><span class="token punctuation">=</span><span class="token string">30s</span> <span class="token property">--timeout</span><span class="token punctuation">=</span><span class="token string">3s</span> <span class="token property">--start-period</span><span class="token punctuation">=</span><span class="token string">5s</span> <span class="token property">--retries</span><span class="token punctuation">=</span><span class="token string">3</span></span> <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">  <span class="token keyword">CMD</span> node -e <span class="token string">&quot;require(&#x27;http&#x27;).get(&#x27;http://localhost:3000/health&#x27;, (r) =&gt; {process.exit(r.statusCode === 200 ? 0 : 1)})&quot;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;node&quot;</span>, <span class="token string">&quot;src/index.js&quot;</span>]</span>
</span></code></pre></div><h3 id="docker-compose-db-포함"><a href="#docker-compose-db-포함" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Docker Compose (DB 포함)</h3><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">version</span><span class="token punctuation">:</span> <span class="token string">&#x27;3.8&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">services</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">api</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">build</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">context</span><span class="token punctuation">:</span> .
</span><span class="code-line">      <span class="token atrule key">dockerfile</span><span class="token punctuation">:</span> Dockerfile
</span><span class="code-line">    <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;3000:3000&#x27;</span>
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> NODE_ENV=production
</span><span class="code-line">      <span class="token punctuation">-</span> DB_HOST=postgres
</span><span class="code-line">      <span class="token punctuation">-</span> DB_PORT=5432
</span><span class="code-line">      <span class="token punctuation">-</span> DB_NAME=myapp
</span><span class="code-line">      <span class="token punctuation">-</span> DB_USER=postgres
</span><span class="code-line">      <span class="token punctuation">-</span> DB_PASSWORD=password
</span><span class="code-line">    <span class="token atrule key">depends_on</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">postgres</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">condition</span><span class="token punctuation">:</span> service_healthy
</span><span class="code-line">    <span class="token atrule key">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
</span><span class="code-line">
</span><span class="code-line">  <span class="token atrule key">postgres</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span>15<span class="token punctuation">-</span>alpine
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_DB=myapp
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_USER=postgres
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_PASSWORD=password
</span><span class="code-line">    <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> postgres_data<span class="token punctuation">:</span>/var/lib/postgresql/data
</span><span class="code-line">    <span class="token atrule key">healthcheck</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;CMD-SHELL&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;pg_isready -U postgres&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">      <span class="token atrule key">interval</span><span class="token punctuation">:</span> 10s
</span><span class="code-line">      <span class="token atrule key">timeout</span><span class="token punctuation">:</span> 5s
</span><span class="code-line">      <span class="token atrule key">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">postgres_data</span><span class="token punctuation">:</span>
</span></code></pre></div><hr/><h2 id="nestjs"><a href="#nestjs" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>NestJS</h2><h3 id="최적화된-dockerfile-3"><a href="#최적화된-dockerfile-3" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>최적화된 Dockerfile</h3><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Development Dependencies</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine <span class="token keyword">AS</span> development</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package.json package-lock.json* ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> . .</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Build Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine <span class="token keyword">AS</span> builder</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package.json package-lock.json* ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> . .</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm run build</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Production Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> node:18-alpine <span class="token keyword">AS</span> production</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># non-root 유저</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> addgroup -g 1001 -S nodejs &amp;&amp; <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">    adduser -S nestjs -u 1001</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 프로덕션 의존성만 설치</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> package.json package-lock.json* ./</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci --only=production &amp;&amp; npm cache clean --force</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 빌드된 파일 복사</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span> <span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">nestjs:nodejs</span></span> /app/dist ./dist</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">USER</span> nestjs</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 3000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">HEALTHCHECK</span> <span class="token options"><span class="token property">--interval</span><span class="token punctuation">=</span><span class="token string">30s</span> <span class="token property">--timeout</span><span class="token punctuation">=</span><span class="token string">3s</span> <span class="token property">--start-period</span><span class="token punctuation">=</span><span class="token string">10s</span> <span class="token property">--retries</span><span class="token punctuation">=</span><span class="token string">3</span></span> <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">  <span class="token keyword">CMD</span> node -e <span class="token string">&quot;require(&#x27;http&#x27;).get(&#x27;http://localhost:3000/health&#x27;, (r) =&gt; {process.exit(r.statusCode === 200 ? 0 : 1)})&quot;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;node&quot;</span>, <span class="token string">&quot;dist/main.js&quot;</span>]</span>
</span></code></pre></div><h3 id="docker-compose-redis--postgresql"><a href="#docker-compose-redis--postgresql" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Docker Compose (Redis + PostgreSQL)</h3><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">version</span><span class="token punctuation">:</span> <span class="token string">&#x27;3.8&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">services</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">nestjs</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">build</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">context</span><span class="token punctuation">:</span> .
</span><span class="code-line">      <span class="token atrule key">dockerfile</span><span class="token punctuation">:</span> Dockerfile
</span><span class="code-line">      <span class="token atrule key">target</span><span class="token punctuation">:</span> production
</span><span class="code-line">    <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;3000:3000&#x27;</span>
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> NODE_ENV=production
</span><span class="code-line">      <span class="token punctuation">-</span> DATABASE_URL=postgresql<span class="token punctuation">:</span>//postgres<span class="token punctuation">:</span>password@postgres<span class="token punctuation">:</span>5432/nestdb
</span><span class="code-line">      <span class="token punctuation">-</span> REDIS_HOST=redis
</span><span class="code-line">      <span class="token punctuation">-</span> REDIS_PORT=6379
</span><span class="code-line">    <span class="token atrule key">depends_on</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">postgres</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">condition</span><span class="token punctuation">:</span> service_healthy
</span><span class="code-line">      <span class="token atrule key">redis</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">condition</span><span class="token punctuation">:</span> service_healthy
</span><span class="code-line">    <span class="token atrule key">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
</span><span class="code-line">
</span><span class="code-line">  <span class="token atrule key">postgres</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span>15<span class="token punctuation">-</span>alpine
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_DB=nestdb
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_USER=postgres
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_PASSWORD=password
</span><span class="code-line">    <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> postgres_data<span class="token punctuation">:</span>/var/lib/postgresql/data
</span><span class="code-line">    <span class="token atrule key">healthcheck</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;CMD-SHELL&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;pg_isready -U postgres&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">      <span class="token atrule key">interval</span><span class="token punctuation">:</span> 10s
</span><span class="code-line">      <span class="token atrule key">timeout</span><span class="token punctuation">:</span> 5s
</span><span class="code-line">      <span class="token atrule key">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token atrule key">redis</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>7<span class="token punctuation">-</span>alpine
</span><span class="code-line">    <span class="token atrule key">healthcheck</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;CMD&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;redis-cli&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;ping&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">      <span class="token atrule key">interval</span><span class="token punctuation">:</span> 10s
</span><span class="code-line">      <span class="token atrule key">timeout</span><span class="token punctuation">:</span> 3s
</span><span class="code-line">      <span class="token atrule key">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
</span><span class="code-line">    <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> redis_data<span class="token punctuation">:</span>/data
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">postgres_data</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">redis_data</span><span class="token punctuation">:</span>
</span></code></pre></div><h3 id="개발-환경용-docker-composedevyml"><a href="#개발-환경용-docker-composedevyml" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>개발 환경용 docker-compose.dev.yml</h3><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">version</span><span class="token punctuation">:</span> <span class="token string">&#x27;3.8&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">services</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">nestjs-dev</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">build</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">context</span><span class="token punctuation">:</span> .
</span><span class="code-line">      <span class="token atrule key">dockerfile</span><span class="token punctuation">:</span> Dockerfile
</span><span class="code-line">      <span class="token atrule key">target</span><span class="token punctuation">:</span> development
</span><span class="code-line">    <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;3000:3000&#x27;</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;9229:9229&#x27;</span> <span class="token comment"># Debug port</span>
</span><span class="code-line">    <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> .<span class="token punctuation">:</span>/app
</span><span class="code-line">      <span class="token punctuation">-</span> /app/node_modules
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> NODE_ENV=development
</span><span class="code-line">      <span class="token punctuation">-</span> DATABASE_URL=postgresql<span class="token punctuation">:</span>//postgres<span class="token punctuation">:</span>password@postgres<span class="token punctuation">:</span>5432/nestdb
</span><span class="code-line">    <span class="token atrule key">command</span><span class="token punctuation">:</span> npm run start<span class="token punctuation">:</span>dev
</span><span class="code-line">    <span class="token atrule key">depends_on</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> postgres
</span><span class="code-line">
</span><span class="code-line">  <span class="token atrule key">postgres</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span>15<span class="token punctuation">-</span>alpine
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_DB=nestdb
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_USER=postgres
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_PASSWORD=password
</span><span class="code-line">    <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;5432:5432&#x27;</span>
</span><span class="code-line">    <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> postgres_dev_data<span class="token punctuation">:</span>/var/lib/postgresql/data
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">postgres_dev_data</span><span class="token punctuation">:</span>
</span></code></pre></div><hr/><h2 id="fastapi-python"><a href="#fastapi-python" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>FastAPI (Python)</h2><h3 id="최적화된-dockerfile-4"><a href="#최적화된-dockerfile-4" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>최적화된 Dockerfile</h3><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Build Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> python:3.11-slim <span class="token keyword">AS</span> builder</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 시스템 의존성</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> apt-get update &amp;&amp; <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">    apt-get install -y --no-install-recommends gcc &amp;&amp; <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">    rm -rf /var/lib/apt/lists/*</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Python 의존성 설치</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> requirements.txt .</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> pip install --user --no-cache-dir -r requirements.txt</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Production Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> python:3.11-slim <span class="token keyword">AS</span> runner</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># non-root 유저</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> groupadd -r appuser &amp;&amp; useradd -r -g appuser appuser</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># builder에서 설치된 패키지 복사</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /root/.local /home/appuser/.local</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># PATH에 추가</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">ENV</span> PATH=/home/appuser/.local/bin:<span class="token variable">$PATH</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 소스 코드 복사</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">appuser:appuser</span></span> . .</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">USER</span> appuser</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 8000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 헬스체크</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">HEALTHCHECK</span> <span class="token options"><span class="token property">--interval</span><span class="token punctuation">=</span><span class="token string">30s</span> <span class="token property">--timeout</span><span class="token punctuation">=</span><span class="token string">3s</span> <span class="token property">--start-period</span><span class="token punctuation">=</span><span class="token string">5s</span> <span class="token property">--retries</span><span class="token punctuation">=</span><span class="token string">3</span></span> <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">  <span class="token keyword">CMD</span> python -c <span class="token string">&quot;import urllib.request; urllib.request.urlopen(&#x27;http://localhost:8000/health&#x27;)&quot;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;uvicorn&quot;</span>, <span class="token string">&quot;main:app&quot;</span>, <span class="token string">&quot;--host&quot;</span>, <span class="token string">&quot;0.0.0.0&quot;</span>, <span class="token string">&quot;--port&quot;</span>, <span class="token string">&quot;8000&quot;</span>]</span>
</span></code></pre></div><h3 id="poetry-사용-시"><a href="#poetry-사용-시" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Poetry 사용 시</h3><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Build Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> python:3.11-slim <span class="token keyword">AS</span> builder</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># Poetry 설치</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> pip install --no-cache-dir poetry</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># pyproject.toml과 poetry.lock 복사</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> pyproject.toml poetry.lock ./</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 의존성을 requirements.txt로 export</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> poetry export -f requirements.txt --output requirements.txt --without-hashes</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 의존성 설치</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> pip install --user --no-cache-dir -r requirements.txt</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token comment"># Production Stage</span>
</span><span class="code-line"><span class="token comment"># ===========================</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">FROM</span> python:3.11-slim <span class="token keyword">AS</span> runner</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">WORKDIR</span> /app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> groupadd -r appuser &amp;&amp; useradd -r -g appuser appuser</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--from</span><span class="token punctuation">=</span><span class="token string">builder</span></span> /root/.local /home/appuser/.local</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">ENV</span> PATH=/home/appuser/.local/bin:<span class="token variable">$PATH</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> <span class="token options"><span class="token property">--chown</span><span class="token punctuation">=</span><span class="token string">appuser:appuser</span></span> ./app ./app</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">USER</span> appuser</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">EXPOSE</span> 8000</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">HEALTHCHECK</span> <span class="token options"><span class="token property">--interval</span><span class="token punctuation">=</span><span class="token string">30s</span> <span class="token property">--timeout</span><span class="token punctuation">=</span><span class="token string">3s</span> <span class="token property">--start-period</span><span class="token punctuation">=</span><span class="token string">5s</span> <span class="token property">--retries</span><span class="token punctuation">=</span><span class="token string">3</span></span> <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">  <span class="token keyword">CMD</span> python -c <span class="token string">&quot;import urllib.request; urllib.request.urlopen(&#x27;http://localhost:8000/health&#x27;)&quot;</span></span>
</span><span class="code-line">
</span><span class="code-line"><span class="token instruction"><span class="token keyword">CMD</span> [<span class="token string">&quot;uvicorn&quot;</span>, <span class="token string">&quot;app.main:app&quot;</span>, <span class="token string">&quot;--host&quot;</span>, <span class="token string">&quot;0.0.0.0&quot;</span>, <span class="token string">&quot;--port&quot;</span>, <span class="token string">&quot;8000&quot;</span>]</span>
</span></code></pre></div><h3 id="requirementstxt-예시"><a href="#requirementstxt-예시" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>requirements.txt 예시</h3><div class="relative"><pre><code class="code-highlight language-txt"><span class="code-line">fastapi==0.104.1
</span><span class="code-line">uvicorn[standard]==0.24.0
</span><span class="code-line">pydantic==2.5.0
</span><span class="code-line">sqlalchemy==2.0.23
</span><span class="code-line">alembic==1.12.1
</span><span class="code-line">asyncpg==0.29.0
</span><span class="code-line">redis==5.0.1
</span><span class="code-line">python-jose[cryptography]==3.3.0
</span><span class="code-line">passlib[bcrypt]==1.7.4
</span><span class="code-line">python-multipart==0.0.6
</span></code></pre></div><h3 id="docker-compose-postgresql--redis"><a href="#docker-compose-postgresql--redis" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Docker Compose (PostgreSQL + Redis)</h3><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">version</span><span class="token punctuation">:</span> <span class="token string">&#x27;3.8&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">services</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">fastapi</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">build</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">context</span><span class="token punctuation">:</span> .
</span><span class="code-line">      <span class="token atrule key">dockerfile</span><span class="token punctuation">:</span> Dockerfile
</span><span class="code-line">    <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;8000:8000&#x27;</span>
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> DATABASE_URL=postgresql+asyncpg<span class="token punctuation">:</span>//postgres<span class="token punctuation">:</span>password@postgres<span class="token punctuation">:</span>5432/fastapi
</span><span class="code-line">      <span class="token punctuation">-</span> REDIS_URL=redis<span class="token punctuation">:</span>//redis<span class="token punctuation">:</span>6379/0
</span><span class="code-line">    <span class="token atrule key">depends_on</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">postgres</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">condition</span><span class="token punctuation">:</span> service_healthy
</span><span class="code-line">      <span class="token atrule key">redis</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">condition</span><span class="token punctuation">:</span> service_healthy
</span><span class="code-line">    <span class="token atrule key">restart</span><span class="token punctuation">:</span> unless<span class="token punctuation">-</span>stopped
</span><span class="code-line">
</span><span class="code-line">  <span class="token atrule key">postgres</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span>15<span class="token punctuation">-</span>alpine
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_DB=fastapi
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_USER=postgres
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_PASSWORD=password
</span><span class="code-line">    <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> postgres_data<span class="token punctuation">:</span>/var/lib/postgresql/data
</span><span class="code-line">    <span class="token atrule key">healthcheck</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;CMD-SHELL&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;pg_isready -U postgres&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">      <span class="token atrule key">interval</span><span class="token punctuation">:</span> 10s
</span><span class="code-line">      <span class="token atrule key">timeout</span><span class="token punctuation">:</span> 5s
</span><span class="code-line">      <span class="token atrule key">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token atrule key">redis</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">image</span><span class="token punctuation">:</span> redis<span class="token punctuation">:</span>7<span class="token punctuation">-</span>alpine
</span><span class="code-line">    <span class="token atrule key">healthcheck</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">test</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&#x27;CMD&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;redis-cli&#x27;</span><span class="token punctuation">,</span> <span class="token string">&#x27;ping&#x27;</span><span class="token punctuation">]</span>
</span><span class="code-line">      <span class="token atrule key">interval</span><span class="token punctuation">:</span> 10s
</span><span class="code-line">      <span class="token atrule key">timeout</span><span class="token punctuation">:</span> 3s
</span><span class="code-line">      <span class="token atrule key">retries</span><span class="token punctuation">:</span> <span class="token number">5</span>
</span><span class="code-line">    <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> redis_data<span class="token punctuation">:</span>/data
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">postgres_data</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">redis_data</span><span class="token punctuation">:</span>
</span></code></pre></div><h3 id="개발-환경용-설정"><a href="#개발-환경용-설정" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>개발 환경용 설정</h3><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">version</span><span class="token punctuation">:</span> <span class="token string">&#x27;3.8&#x27;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">services</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">fastapi-dev</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">build</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">context</span><span class="token punctuation">:</span> .
</span><span class="code-line">      <span class="token atrule key">dockerfile</span><span class="token punctuation">:</span> Dockerfile
</span><span class="code-line">    <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;8000:8000&#x27;</span>
</span><span class="code-line">    <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> ./app<span class="token punctuation">:</span>/app/app
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> ENVIRONMENT=development
</span><span class="code-line">      <span class="token punctuation">-</span> DATABASE_URL=postgresql+asyncpg<span class="token punctuation">:</span>//postgres<span class="token punctuation">:</span>password@postgres<span class="token punctuation">:</span>5432/fastapi
</span><span class="code-line">    <span class="token atrule key">command</span><span class="token punctuation">:</span> uvicorn app.main<span class="token punctuation">:</span>app <span class="token punctuation">-</span><span class="token punctuation">-</span>host 0.0.0.0 <span class="token punctuation">-</span><span class="token punctuation">-</span>port 8000 <span class="token punctuation">-</span><span class="token punctuation">-</span>reload
</span><span class="code-line">    <span class="token atrule key">depends_on</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> postgres
</span><span class="code-line">
</span><span class="code-line">  <span class="token atrule key">postgres</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">image</span><span class="token punctuation">:</span> postgres<span class="token punctuation">:</span>15<span class="token punctuation">-</span>alpine
</span><span class="code-line">    <span class="token atrule key">environment</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_DB=fastapi
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_USER=postgres
</span><span class="code-line">      <span class="token punctuation">-</span> POSTGRES_PASSWORD=password
</span><span class="code-line">    <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token string">&#x27;5432:5432&#x27;</span>
</span><span class="code-line">    <span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> postgres_dev_data<span class="token punctuation">:</span>/var/lib/postgresql/data
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">volumes</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">postgres_dev_data</span><span class="token punctuation">:</span>
</span></code></pre></div><hr/><h2 id="공통-최적화-팁"><a href="#공통-최적화-팁" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>공통 최적화 팁</h2><h3 id="1-빌드-시간-단축"><a href="#1-빌드-시간-단축" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. 빌드 시간 단축</h3><p><strong>병렬 빌드 활성화:</strong></p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token comment"># Docker BuildKit 사용</span>
</span><span class="code-line"><span class="token variable assign-left">DOCKER_BUILDKIT</span><span class="token operator">=</span><span class="token number">1</span> <span class="token function">docker</span> build <span class="token variable parameter">-t</span> myapp <span class="token class-name builtin">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 또는 환경 변수로 설정</span>
</span><span class="code-line"><span class="token class-name builtin">export</span> <span class="token variable assign-left">DOCKER_BUILDKIT</span><span class="token operator">=</span><span class="token number">1</span>
</span></code></pre></div><p><strong>멀티 플랫폼 빌드:</strong></p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token comment"># arm64, amd64 동시 빌드</span>
</span><span class="code-line"><span class="token function">docker</span> buildx build <span class="token variable parameter">--platform</span> linux/amd64,linux/arm64 <span class="token variable parameter">-t</span> myapp:latest <span class="token class-name builtin">.</span>
</span></code></pre></div><hr/><h3 id="2-이미지-스캔-보안"><a href="#2-이미지-스캔-보안" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. 이미지 스캔 (보안)</h3><p><strong>Trivy 사용:</strong></p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token comment"># 이미지 스캔</span>
</span><span class="code-line">trivy image myapp:latest
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 심각도 HIGH 이상만 표시</span>
</span><span class="code-line">trivy image <span class="token variable parameter">--severity</span> HIGH,CRITICAL myapp:latest
</span></code></pre></div><p><strong>Docker Scout (Docker Desktop 포함):</strong></p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token function">docker</span> scout cves myapp:latest
</span></code></pre></div><hr/><h3 id="3-레이어-확인"><a href="#3-레이어-확인" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3. 레이어 확인</h3><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token comment"># 레이어별 크기 확인</span>
</span><span class="code-line"><span class="token function">docker</span> <span class="token function">history</span> myapp:latest
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 상세 정보</span>
</span><span class="code-line"><span class="token function">docker</span> inspect myapp:latest
</span></code></pre></div><hr/><h3 id="4-불필요한-파일-제거"><a href="#4-불필요한-파일-제거" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>4. 불필요한 파일 제거</h3><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token comment"># 캐시 삭제</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> apt-get update &amp;&amp; <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">    apt-get install -y package &amp;&amp; <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">    rm -rf /var/lib/apt/lists/*</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># npm 캐시 삭제</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">RUN</span> npm ci &amp;&amp; npm cache clean --force</span>
</span></code></pre></div><hr/><h3 id="5-환경별-빌드"><a href="#5-환경별-빌드" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>5. 환경별 빌드</h3><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token comment"># 개발 환경</span>
</span><span class="code-line"><span class="token function">docker-compose</span> <span class="token variable parameter">-f</span> docker-compose.yml <span class="token variable parameter">-f</span> docker-compose.dev.yml up
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 프로덕션 환경</span>
</span><span class="code-line"><span class="token function">docker-compose</span> <span class="token variable parameter">-f</span> docker-compose.yml <span class="token variable parameter">-f</span> docker-compose.prod.yml up
</span></code></pre></div><hr/><h2 id="주의사항"><a href="#주의사항" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>주의사항</h2><h3 id="1-secrets-관리"><a href="#1-secrets-관리" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. Secrets 관리</h3><p><strong>❌ 절대 하지 말 것:</strong></p><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token comment"># 이미지에 secrets 포함</span>
</span><span class="code-line"><span class="token instruction"><span class="token keyword">COPY</span> .env .</span>
</span></code></pre></div><p><strong>✅ 올바른 방법:</strong></p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token comment"># 런타임에 환경 변수로 주입</span>
</span><span class="code-line"><span class="token function">docker</span> run <span class="token variable parameter">-e</span> <span class="token variable assign-left">DB_PASSWORD</span><span class="token operator">=</span>secret myapp
</span></code></pre></div><p>또는 Docker Secrets 사용:</p><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token comment"># docker-compose.yml</span>
</span><span class="code-line"><span class="token atrule key">services</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">app</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">secrets</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> db_password
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">secrets</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">db_password</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">file</span><span class="token punctuation">:</span> ./secrets/db_password.txt
</span></code></pre></div><hr/><h3 id="2-헬스체크-필수"><a href="#2-헬스체크-필수" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. 헬스체크 필수</h3><p>모든 프로덕션 컨테이너에 헬스체크 추가:</p><div class="relative"><pre><code class="code-highlight language-dockerfile"><span class="code-line"><span class="token instruction"><span class="token keyword">HEALTHCHECK</span> <span class="token options"><span class="token property">--interval</span><span class="token punctuation">=</span><span class="token string">30s</span> <span class="token property">--timeout</span><span class="token punctuation">=</span><span class="token string">3s</span> <span class="token property">--start-period</span><span class="token punctuation">=</span><span class="token string">5s</span> <span class="token property">--retries</span><span class="token punctuation">=</span><span class="token string">3</span></span> <span class="token operator">\</span>
</span></span><span class="code-line"><span class="token instruction">  <span class="token keyword">CMD</span> curl -f http://localhost:3000/health || exit 1</span>
</span></code></pre></div><hr/><h3 id="3-로그-관리"><a href="#3-로그-관리" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3. 로그 관리</h3><p><strong>stdout/stderr로 로그 출력:</strong></p><div class="relative"><pre><code class="code-highlight language-javascript"><span class="code-line"><span class="token comment">// Express.js</span>
</span><span class="code-line"><span class="token class-name console">console</span><span class="token punctuation">.</span><span class="token function property-access method">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Server started&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token class-name console">console</span><span class="token punctuation">.</span><span class="token function property-access method">error</span><span class="token punctuation">(</span><span class="token string">&#x27;Error occurred&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre></div><p>컨테이너 로그 확인:</p><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token function">docker</span> logs <span class="token variable parameter">-f</span> container-name
</span></code></pre></div><hr/><h2 id="실전-배포-워크플로우"><a href="#실전-배포-워크플로우" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>실전 배포 워크플로우</h2><h3 id="1-로컬-빌드--테스트"><a href="#1-로컬-빌드--테스트" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>1. 로컬 빌드 &amp; 테스트</h3><div class="relative"><pre><code class="code-highlight language-bash"><span class="code-line"><span class="token comment"># 빌드</span>
</span><span class="code-line"><span class="token function">docker</span> build <span class="token variable parameter">-t</span> myapp:latest <span class="token class-name builtin">.</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 실행</span>
</span><span class="code-line"><span class="token function">docker</span> run <span class="token variable parameter">-p</span> <span class="token number">3000</span>:3000 myapp:latest
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 헬스체크 확인</span>
</span><span class="code-line"><span class="token function">curl</span> http://localhost:3000/health
</span></code></pre></div><hr/><h3 id="2-cicd-github-actions-예시"><a href="#2-cicd-github-actions-예시" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>2. CI/CD (GitHub Actions 예시)</h3><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">name</span><span class="token punctuation">:</span> Docker Build and Push
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">on</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">push</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">branches</span><span class="token punctuation">:</span> <span class="token punctuation">[</span>main<span class="token punctuation">]</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token atrule key">jobs</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">build</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">runs-on</span><span class="token punctuation">:</span> ubuntu<span class="token punctuation">-</span>latest
</span><span class="code-line">    <span class="token atrule key">steps</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token atrule key">uses</span><span class="token punctuation">:</span> actions/checkout@v3
</span><span class="code-line">
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> Set up Docker Buildx
</span><span class="code-line">        <span class="token atrule key">uses</span><span class="token punctuation">:</span> docker/setup<span class="token punctuation">-</span>buildx<span class="token punctuation">-</span>action@v2
</span><span class="code-line">
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> Login to Docker Hub
</span><span class="code-line">        <span class="token atrule key">uses</span><span class="token punctuation">:</span> docker/login<span class="token punctuation">-</span>action@v2
</span><span class="code-line">        <span class="token atrule key">with</span><span class="token punctuation">:</span>
</span><span class="code-line">          <span class="token atrule key">username</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_USERNAME <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line">          <span class="token atrule key">password</span><span class="token punctuation">:</span> $<span class="token punctuation">{</span><span class="token punctuation">{</span> secrets.DOCKER_PASSWORD <span class="token punctuation">}</span><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> Build and push
</span><span class="code-line">        <span class="token atrule key">uses</span><span class="token punctuation">:</span> docker/build<span class="token punctuation">-</span>push<span class="token punctuation">-</span>action@v4
</span><span class="code-line">        <span class="token atrule key">with</span><span class="token punctuation">:</span>
</span><span class="code-line">          <span class="token atrule key">context</span><span class="token punctuation">:</span> .
</span><span class="code-line">          <span class="token atrule key">push</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>
</span><span class="code-line">          <span class="token atrule key">tags</span><span class="token punctuation">:</span> username/myapp<span class="token punctuation">:</span>latest
</span><span class="code-line">          <span class="token atrule key">cache-from</span><span class="token punctuation">:</span> type=gha
</span><span class="code-line">          <span class="token atrule key">cache-to</span><span class="token punctuation">:</span> type=gha<span class="token punctuation">,</span>mode=max
</span><span class="code-line">
</span><span class="code-line">      <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> Scan image
</span><span class="code-line">        <span class="token atrule key">run</span><span class="token punctuation">:</span> <span class="token punctuation">|</span><span class="token string scalar">
</span></span><span class="code-line"><span class="token string scalar">          docker run --rm \
</span></span><span class="code-line"><span class="token string scalar">            -v /var/run/docker.sock:/var/run/docker.sock \
</span></span><span class="code-line"><span class="token string scalar">            aquasec/trivy image username/myapp:latest</span>
</span></code></pre></div><hr/><h3 id="3-배포-kubernetes-예시"><a href="#3-배포-kubernetes-예시" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>3. 배포 (Kubernetes 예시)</h3><div class="relative"><pre><code class="code-highlight language-yaml"><span class="code-line"><span class="token atrule key">apiVersion</span><span class="token punctuation">:</span> apps/v1
</span><span class="code-line"><span class="token atrule key">kind</span><span class="token punctuation">:</span> Deployment
</span><span class="code-line"><span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">name</span><span class="token punctuation">:</span> myapp
</span><span class="code-line"><span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token atrule key">replicas</span><span class="token punctuation">:</span> <span class="token number">3</span>
</span><span class="code-line">  <span class="token atrule key">selector</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">matchLabels</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">app</span><span class="token punctuation">:</span> myapp
</span><span class="code-line">  <span class="token atrule key">template</span><span class="token punctuation">:</span>
</span><span class="code-line">    <span class="token atrule key">metadata</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">labels</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token atrule key">app</span><span class="token punctuation">:</span> myapp
</span><span class="code-line">    <span class="token atrule key">spec</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token atrule key">containers</span><span class="token punctuation">:</span>
</span><span class="code-line">        <span class="token punctuation">-</span> <span class="token atrule key">name</span><span class="token punctuation">:</span> myapp
</span><span class="code-line">          <span class="token atrule key">image</span><span class="token punctuation">:</span> username/myapp<span class="token punctuation">:</span>latest
</span><span class="code-line">          <span class="token atrule key">ports</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token punctuation">-</span> <span class="token atrule key">containerPort</span><span class="token punctuation">:</span> <span class="token number">3000</span>
</span><span class="code-line">          <span class="token atrule key">livenessProbe</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token atrule key">httpGet</span><span class="token punctuation">:</span>
</span><span class="code-line">              <span class="token atrule key">path</span><span class="token punctuation">:</span> /health
</span><span class="code-line">              <span class="token atrule key">port</span><span class="token punctuation">:</span> <span class="token number">3000</span>
</span><span class="code-line">            <span class="token atrule key">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
</span><span class="code-line">            <span class="token atrule key">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">10</span>
</span><span class="code-line">          <span class="token atrule key">readinessProbe</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token atrule key">httpGet</span><span class="token punctuation">:</span>
</span><span class="code-line">              <span class="token atrule key">path</span><span class="token punctuation">:</span> /health
</span><span class="code-line">              <span class="token atrule key">port</span><span class="token punctuation">:</span> <span class="token number">3000</span>
</span><span class="code-line">            <span class="token atrule key">initialDelaySeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
</span><span class="code-line">            <span class="token atrule key">periodSeconds</span><span class="token punctuation">:</span> <span class="token number">5</span>
</span><span class="code-line">          <span class="token atrule key">resources</span><span class="token punctuation">:</span>
</span><span class="code-line">            <span class="token atrule key">requests</span><span class="token punctuation">:</span>
</span><span class="code-line">              <span class="token atrule key">memory</span><span class="token punctuation">:</span> <span class="token string">&#x27;256Mi&#x27;</span>
</span><span class="code-line">              <span class="token atrule key">cpu</span><span class="token punctuation">:</span> <span class="token string">&#x27;250m&#x27;</span>
</span><span class="code-line">            <span class="token atrule key">limits</span><span class="token punctuation">:</span>
</span><span class="code-line">              <span class="token atrule key">memory</span><span class="token punctuation">:</span> <span class="token string">&#x27;512Mi&#x27;</span>
</span><span class="code-line">              <span class="token atrule key">cpu</span><span class="token punctuation">:</span> <span class="token string">&#x27;500m&#x27;</span>
</span></code></pre></div><hr/><h2 id="마치며"><a href="#마치며" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>마치며</h2><h3 id="체크리스트"><a href="#체크리스트" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>체크리스트</h3><p>✅ <strong>멀티스테이지 빌드 사용</strong> ✅ <strong>레이어 캐싱 최적화</strong> ✅ <strong>non-root 유저 실행</strong> ✅ <strong>.dockerignore 작성</strong> ✅ <strong>헬스체크 설정</strong> ✅ <strong>보안 스캔 실행</strong> ✅ <strong>이미지 크기 확인</strong></p><h3 id="추가-학습-자료"><a href="#추가-학습-자료" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>추가 학습 자료</h3><ul><li><a target="_blank" rel="noopener noreferrer" href="https://docs.docker.com/develop/dev-best-practices/">Docker 공식 문서 - Best Practices</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://nextjs.org/docs/deployment#docker-image">Next.js Docker 가이드</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://aquasecurity.github.io/trivy/">Trivy 문서</a></li></ul><hr/><p><strong>작성일:</strong> 2025-11-17 <strong>마지막 수정:</strong> 2025-11-17</p></div></div><div></div><footer><div class="flex flex-col text-sm font-medium sm:flex-row sm:justify-between sm:text-base"><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog/doc/claude-code-performance-cost-optimization">← <!-- -->Claude Code 성능 최적화 및 비용 절약 완벽 가이드</a></div><div class="pt-4 xl:pt-8"><a class="text-primary-500 hover:text-primary-600 dark:hover:text-primary-400" href="/blog/doc/claude-code-plan-mode-guide">Claude Code Plan Mode 완벽 활용 가이드<!-- --> →</a></div></div></footer></div></div></article></div></main><footer><div class="mt-16 flex flex-col items-center"><div class="mb-3 flex space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:address@yoursite.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884 10 9.882l7.997-3.998A2 2 0 0 0 16 4H4a2 2 0 0 0-1.997 1.884z"></path><path d="m18 8.118-8 4-8-4V14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/bulhwi"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://facebook.com"><span class="sr-only">facebook</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://youtube.com"><span class="sr-only">youtube</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M23.499 6.203a3.008 3.008 0 0 0-2.089-2.089c-1.87-.501-9.4-.501-9.4-.501s-7.509-.01-9.399.501a3.008 3.008 0 0 0-2.088 2.09A31.258 31.26 0 0 0 0 12.01a31.258 31.26 0 0 0 .523 5.785 3.008 3.008 0 0 0 2.088 2.089c1.869.502 9.4.502 9.4.502s7.508 0 9.399-.502a3.008 3.008 0 0 0 2.089-2.09 31.258 31.26 0 0 0 .5-5.784 31.258 31.26 0 0 0-.5-5.808zm-13.891 9.4V8.407l6.266 3.604z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 0 1-2.063-2.065 2.064 2.064 0 1 1 2.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/Twitter"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-700 hover:text-blue-500 dark:text-gray-200 dark:hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 0 1-2.825.775 4.958 4.958 0 0 0 2.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 0 0-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 0 0-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 0 1-2.228-.616v.06a4.923 4.923 0 0 0 3.946 4.827 4.996 4.996 0 0 1-2.212.085 4.936 4.936 0 0 0 4.604 3.417 9.867 9.867 0 0 1-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 0 0 7.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0 0 24 4.59z"></path></svg></a></div><div class="mb-2 flex space-x-2 text-sm text-gray-500 dark:text-gray-400"><div>bulhwi</div><div> • </div><div>© 2025</div><div> • </div><a href="/">bulhwi.github.io</a></div><div class="mb-8 text-sm text-gray-500 dark:text-gray-400"><a target="_blank" rel="noopener noreferrer" href="https://github.com/timlrx/tailwind-nextjs-starter-blog">Tailwind Nextjs Theme</a></div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":"var Component=(()=\u003e{var t=Object.create;var l=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var h=Object.getPrototypeOf,m=Object.prototype.hasOwnProperty;var i=a=\u003el(a,\"__esModule\",{value:!0});var N=(a,s)=\u003e()=\u003e(s||a((s={exports:{}}).exports,s),s.exports),k=(a,s)=\u003e{i(a);for(var c in s)l(a,c,{get:s[c],enumerable:!0})},u=(a,s,c)=\u003e{if(s\u0026\u0026typeof s==\"object\"||typeof s==\"function\")for(let n of p(s))!m.call(a,n)\u0026\u0026n!==\"default\"\u0026\u0026l(a,n,{get:()=\u003es[n],enumerable:!(c=d(s,n))||c.enumerable});return a},g=a=\u003eu(i(l(a!=null?t(h(a)):{},\"default\",a\u0026\u0026a.__esModule\u0026\u0026\"default\"in a?{get:()=\u003ea.default,enumerable:!0}:{value:a,enumerable:!0})),a);var o=N((R,r)=\u003e{r.exports=_jsx_runtime});var b={};k(b,{default:()=\u003ew,frontmatter:()=\u003ey});var e=g(o()),y={title:\"\\uC2E4\\uC804 Dockerfile \\uC791\\uC131 \\uD328\\uD134: \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uBCC4 \\uBCA0\\uC2A4\\uD2B8 \\uD504\\uB799\\uD2F0\\uC2A4\",date:\"2025-11-17\",tags:[\"docker\",\"dockerfile\",\"nextjs\",\"react\",\"nodejs\",\"python\",\"devops\"],draft:!1,summary:\"Next.js, React, Express, NestJS, FastAPI \\uB4F1 \\uC8FC\\uC694 \\uD504\\uB808\\uC784\\uC6CC\\uD06C\\uBCC4\\uB85C \\uCD5C\\uC801\\uD654\\uB41C Dockerfile \\uC791\\uC131\\uBC95\\uACFC \\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0 \\uBE4C\\uB4DC, \\uBCF4\\uC548, \\uCE90\\uC2DC \\uCD5C\\uC801\\uD654 \\uC804\\uB7B5\\uC744 \\uC2E4\\uC804 \\uC608\\uC2DC\\uC640 \\uD568\\uAED8 \\uC815\\uB9AC\\uD588\\uC2B5\\uB2C8\\uB2E4.\",images:[],layout:\"PostSimple\",canonicalUrl:\"https://bulhwi.github.io/blog/dockerfile-best-practices-by-framework\"};function f(a={}){let{wrapper:s}=a.components||{};return s?(0,e.jsx)(s,Object.assign({},a,{children:(0,e.jsx)(c,{})})):c();function c(){let n=Object.assign({h2:\"h2\",a:\"a\",span:\"span\",ol:\"ol\",li:\"li\",hr:\"hr\",h3:\"h3\",p:\"p\",strong:\"strong\",pre:\"pre\",code:\"code\",ul:\"ul\"},a.components);return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)(n.h2,{id:\"\\uBAA9\\uCC28\",children:[(0,e.jsx)(n.a,{href:\"#\\uBAA9\\uCC28\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uBAA9\\uCC28\"]}),(0,e.jsxs)(n.ol,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#dockerfile-%EC%9E%91%EC%84%B1-%EA%B8%B0%EB%B3%B8-%EC%9B%90%EC%B9%99\",children:\"Dockerfile \\uC791\\uC131 \\uAE30\\uBCF8 \\uC6D0\\uCE59\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#nextjs-app-router\",children:\"Next.js (App Router)\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#react--vite\",children:\"React + Vite\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#expressjs\",children:\"Express.js\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#nestjs\",children:\"NestJS\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#fastapi-python\",children:\"FastAPI (Python)\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"#%EA%B3%B5%ED%86%B5-%EC%B5%9C%EC%A0%81%ED%99%94-%ED%8C%81\",children:\"\\uACF5\\uD1B5 \\uCD5C\\uC801\\uD654 \\uD301\"})})]}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"dockerfile-\\uC791\\uC131-\\uAE30\\uBCF8-\\uC6D0\\uCE59\",children:[(0,e.jsx)(n.a,{href:\"#dockerfile-\\uC791\\uC131-\\uAE30\\uBCF8-\\uC6D0\\uCE59\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Dockerfile \\uC791\\uC131 \\uAE30\\uBCF8 \\uC6D0\\uCE59\"]}),(0,e.jsxs)(n.h3,{id:\"1-\\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0-\\uBE4C\\uB4DC-\\uC0AC\\uC6A9\",children:[(0,e.jsx)(n.a,{href:\"#1-\\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0-\\uBE4C\\uB4DC-\\uC0AC\\uC6A9\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. \\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0 \\uBE4C\\uB4DC \\uC0AC\\uC6A9\"]}),(0,e.jsx)(n.p,{children:\"\\uBE4C\\uB4DC \\uB3C4\\uAD6C\\uC640 \\uB7F0\\uD0C0\\uC784\\uC744 \\uBD84\\uB9AC\\uD574\\uC11C \\uCD5C\\uC885 \\uC774\\uBBF8\\uC9C0 \\uD06C\\uAE30\\uB97C \\uB300\\uD3ED \\uC904\\uC785\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Before (Single Stage):\"})}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm install\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"npm\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"start\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"After (Multi-Stage):\"})}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package*.json ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /app/dist ./dist\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package*.json ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci --only=production\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dist/index.js\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0 \\uBE4C\\uB4DC\\uB97C \\uC0AC\\uC6A9\\uD558\\uBA74:\"}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:\"\\uBE4C\\uB4DC \\uB3C4\\uAD6C(\\uCEF4\\uD30C\\uC77C\\uB7EC, \\uAC1C\\uBC1C \\uC758\\uC874\\uC131)\\uAC00 \\uCD5C\\uC885 \\uC774\\uBBF8\\uC9C0\\uC5D0 \\uD3EC\\uD568\\uB418\\uC9C0 \\uC54A\\uC74C\"}),(0,e.jsx)(n.li,{children:\"Alpine \\uBCA0\\uC774\\uC2A4 \\uC774\\uBBF8\\uC9C0\\uB85C \\uACBD\\uB7C9\\uD654\"}),(0,e.jsx)(n.li,{children:\"\\uBCF4\\uC548: \\uACF5\\uACA9 \\uD45C\\uBA74 \\uAC10\\uC18C\"})]}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"2-\\uB808\\uC774\\uC5B4-\\uCE90\\uC2F1-\\uCD5C\\uC801\\uD654\",children:[(0,e.jsx)(n.a,{href:\"#2-\\uB808\\uC774\\uC5B4-\\uCE90\\uC2F1-\\uCD5C\\uC801\\uD654\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. \\uB808\\uC774\\uC5B4 \\uCE90\\uC2F1 \\uCD5C\\uC801\\uD654\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u274C \\uB098\\uC05C \\uC608:\"})}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm install\"]}),`\n`]})]})}),(0,e.jsxs)(n.p,{children:[\"package.json\\uC774 \\uBC14\\uB00C\\uC9C0 \\uC54A\\uC544\\uB3C4 \\uC18C\\uC2A4 \\uCF54\\uB4DC\\uB9CC \\uBC14\\uB00C\\uBA74 \",(0,e.jsx)(n.code,{children:\"npm install\"}),\" \\uC7AC\\uC2E4\\uD589\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u2705 \\uC88B\\uC740 \\uC608:\"})}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package*.json ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm install\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"package.json\\uC774 \\uBC14\\uB00C\\uC9C0 \\uC54A\\uC73C\\uBA74 \\uCE90\\uC2DC\\uB41C \\uB808\\uC774\\uC5B4 \\uC7AC\\uC0AC\\uC6A9\"}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"3-\\uBCF4\\uC548-\\uAC15\\uD654\",children:[(0,e.jsx)(n.a,{href:\"#3-\\uBCF4\\uC548-\\uAC15\\uD654\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. \\uBCF4\\uC548 \\uAC15\\uD654\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"non-root \\uC720\\uC800 \\uC0AC\\uC6A9\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.strong,{children:\"Alpine \\uB610\\uB294 Distroless \\uBCA0\\uC774\\uC2A4 \\uC774\\uBBF8\\uC9C0\"})}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.strong,{children:\"\\uCDE8\\uC57D\\uC810 \\uC2A4\\uCE94\"}),\" (Trivy, Snyk)\"]})]}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"4-dockerignore-\\uD544\\uC218\",children:[(0,e.jsx)(n.a,{href:\"#4-dockerignore-\\uD544\\uC218\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"4. .dockerignore \\uD544\\uC218\"]}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`node_modules\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`npm-debug.log\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.env\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.git\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.vscode\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`*.md\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.DS_Store\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`dist\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`build\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`coverage\n`})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"nextjs-app-router\",children:[(0,e.jsx)(n.a,{href:\"#nextjs-app-router\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Next.js (App Router)\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCD5C\\uC801\\uD654\\uB41C-dockerfile\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD5C\\uC801\\uD654\\uB41C-dockerfile\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD5C\\uC801\\uD654\\uB41C Dockerfile\"]}),(0,e.jsx)(n.p,{children:\"Next.js \\uACF5\\uC2DD \\uC608\\uC81C\\uB97C \\uAE30\\uBC18\\uC73C\\uB85C \\uD55C \\uD504\\uB85C\\uB355\\uC158 \\uCD5C\\uC801\\uD654 \\uBC84\\uC804\\uC785\\uB2C8\\uB2E4.\"}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Dependencies Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" deps\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" apk add --no-cache libc6-compat\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# package.json\\uACFC lock \\uD30C\\uC77C\\uB9CC \\uBA3C\\uC800 \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Builder Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# deps\\uC5D0\\uC11C node_modules \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"deps\"})]}),\" /app/node_modules ./node_modules\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD658\\uACBD \\uBCC0\\uC218 (\\uBE4C\\uB4DC \\uC2DC\\uC810\\uC5D0 \\uD544\\uC694\\uD55C \\uACBD\\uC6B0)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ARG NEXT_PUBLIC_API_URL\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ENV NEXT_PUBLIC_API_URL=$NEXT_PUBLIC_API_URL\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Next.js \\uD154\\uB808\\uBA54\\uD2B8\\uB9AC \\uBE44\\uD65C\\uC131\\uD654\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" NEXT_TELEMETRY_DISABLED 1\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uBE4C\\uB4DC \\uC2E4\\uD589\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Runner Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" runner\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" NODE_ENV production\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" NEXT_TELEMETRY_DISABLED 1\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# non-root \\uC720\\uC800 \\uC0DD\\uC131\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" addgroup --system --gid 1001 nodejs\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" adduser --system --uid 1001 nextjs\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD544\\uC694\\uD55C \\uD30C\\uC77C\\uB9CC \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /app/public ./public\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /app/.next/standalone ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /app/.next/static ./.next/static\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC720\\uC800 \\uAD8C\\uD55C \\uC124\\uC815\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" nextjs\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 3000\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" PORT 3000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"server.js\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"nextconfigjs-\\uC124\\uC815-\\uD544\\uC218\",children:[(0,e.jsx)(n.a,{href:\"#nextconfigjs-\\uC124\\uC815-\\uD544\\uC218\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"next.config.js \\uC124\\uC815 \\uD544\\uC218\"]}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-javascript\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// next.config.js\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"module\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token property-access\",children:\"exports\"}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token property literal-property\",children:\"output\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'standalone'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsxs)(n.strong,{children:[(0,e.jsx)(n.code,{children:\"output: 'standalone'\"}),\"\\uC774 \\uC911\\uC694\\uD55C \\uC774\\uC720:\"]})}),(0,e.jsxs)(n.ul,{children:[(0,e.jsxs)(n.li,{children:[\"Next.js\\uB294 \\uAE30\\uBCF8\\uC801\\uC73C\\uB85C \",(0,e.jsx)(n.code,{children:\"node_modules\"}),\" \\uC804\\uCCB4\\uB97C \\uD544\\uC694\\uB85C \\uD568\"]}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"standalone\"}),\" \\uBAA8\\uB4DC\\uB294 \\uC2E4\\uC81C\\uB85C \\uC0AC\\uC6A9\\uB418\\uB294 \\uD30C\\uC77C\\uB9CC \",(0,e.jsx)(n.code,{children:\".next/standalone\"}),\"\\uC5D0 \\uBCF5\\uC0AC\"]}),(0,e.jsx)(n.li,{children:\"\\uBD88\\uD544\\uC694\\uD55C \\uC758\\uC874\\uC131 \\uC81C\\uC678\\uB85C \\uC774\\uBBF8\\uC9C0 \\uD06C\\uAE30 \\uB300\\uD3ED \\uAC10\\uC18C\"}),(0,e.jsxs)(n.li,{children:[(0,e.jsx)(n.code,{children:\"server.js\"}),\" \\uD30C\\uC77C\\uC774 \\uC790\\uB3D9 \\uC0DD\\uC131\\uB418\\uC5B4 \\uB3C5\\uB9BD \\uC2E4\\uD589 \\uAC00\\uB2A5\"]})]}),(0,e.jsxs)(n.h3,{id:\"docker-compose-\\uC608\\uC2DC\",children:[(0,e.jsx)(n.a,{href:\"#docker-compose-\\uC608\\uC2DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose \\uC608\\uC2DC\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"nextjs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3000:3000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` NODE_ENV=production\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" NEXT_PUBLIC_API_URL=https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`//api.example.com\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"react--vite\",children:[(0,e.jsx)(n.a,{href:\"#react--vite\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"React + Vite\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-1\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-1\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD5C\\uC801\\uD654\\uB41C Dockerfile\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC758\\uC874\\uC131 \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC18C\\uC2A4 \\uCF54\\uB4DC \\uBCF5\\uC0AC \\uBC0F \\uBE4C\\uB4DC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production Stage (nginx)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" nginx:alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" runner\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# nginx \\uC124\\uC815 \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" nginx.conf /etc/nginx/conf.d/default.conf\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uBE4C\\uB4DC\\uB41C \\uD30C\\uC77C \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /app/dist /usr/share/nginx/html\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 80\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"nginx\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"-g\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"daemon off;\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"nginxconf\",children:[(0,e.jsx)(n.a,{href:\"#nginxconf\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"nginx.conf\"]}),(0,e.jsx)(n.pre,{className:\"language-nginx\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-nginx\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token directive\",children:(0,e.jsx)(n.span,{className:\"token keyword\",children:\"server\"})}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"listen\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"80\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"server_name\"}),\" _\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"root\"}),\" /usr/share/nginx/html\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"index\"}),\" index.html\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# SPA routing \\uCC98\\uB9AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"location\"}),\" /\"]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"try_files\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$uri\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$uri\"}),\"/ /index.html\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC815\\uC801 \\uD30C\\uC77C \\uCE90\\uC2F1\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"location\"}),\" ~* \\\\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$\"]}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"expires\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"1y\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"add_header\"}),\" Cache-Control \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"public, immutable\"'})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# gzip \\uC555\\uCD95\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"gzip\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean\",children:\"on\"})]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsxs)(n.span,{className:\"token directive\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"gzip_types\"}),\" text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript\"]}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"dockerignore\",children:[(0,e.jsx)(n.a,{href:\"#dockerignore\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\".dockerignore\"]}),(0,e.jsx)(n.pre,{children:(0,e.jsxs)(n.code,{className:\"code-highlight\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`node_modules\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`dist\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.env\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.env.local\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.git\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`.vscode\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`*.md\n`})]})}),(0,e.jsxs)(n.h3,{id:\"docker-compose-\\uC608\\uC2DC-1\",children:[(0,e.jsx)(n.a,{href:\"#docker-compose-\\uC608\\uC2DC-1\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose \\uC608\\uC2DC\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"react-app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"args\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" VITE_API_URL=https\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`//api.example.com\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'80:80'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"\\uD658\\uACBD-\\uBCC0\\uC218-\\uBE4C\\uB4DC-\\uC2DC-\\uC8FC\\uC785\",children:[(0,e.jsx)(n.a,{href:\"#\\uD658\\uACBD-\\uBCC0\\uC218-\\uBE4C\\uB4DC-\\uC2DC-\\uC8FC\\uC785\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uD658\\uACBD \\uBCC0\\uC218 \\uBE4C\\uB4DC \\uC2DC \\uC8FC\\uC785\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage\\uC5D0 \\uCD94\\uAC00\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ARG\"}),\" VITE_API_URL\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" VITE_API_URL=\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$VITE_API_URL\"})]}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"expressjs\",children:[(0,e.jsx)(n.a,{href:\"#expressjs\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Express.js\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-2\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-2\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD5C\\uC801\\uD654\\uB41C Dockerfile\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage (TypeScript \\uC0AC\\uC6A9 \\uC2DC)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC758\\uC874\\uC131 \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC18C\\uC2A4 \\uBCF5\\uC0AC \\uBC0F \\uBE4C\\uB4DC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" runner\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# non-root \\uC720\\uC800\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" addgroup -g 1001 -S nodejs\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" adduser -S nodejs -u 1001\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD504\\uB85C\\uB355\\uC158 \\uC758\\uC874\\uC131\\uB9CC \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci --only=production \u0026\u0026 npm cache clean --force\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uBE4C\\uB4DC\\uB41C \\uD30C\\uC77C \\uBCF5\\uC0AC (TypeScript\\uC778 \\uACBD\\uC6B0)\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--chown\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"nodejs:nodejs\"})]}),\" /app/dist ./dist\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uB610\\uB294 JavaScript \\uD504\\uB85C\\uC81D\\uD2B8\\uC778 \\uACBD\\uC6B0\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# COPY --chown=nodejs:nodejs ./src ./src\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" nodejs\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 3000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD5EC\\uC2A4\\uCCB4\\uD06C\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"5s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" node -e \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"require('http').get('http://localhost:3000/health', (r) =\u003e {process.exit(r.statusCode === 200 ? 0 : 1)})\"`})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dist/index.js\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"javascript-\\uD504\\uB85C\\uC81D\\uD2B8\\uC6A9-\\uBE4C\\uB4DC-\\uBD88\\uD544\\uC694\",children:[(0,e.jsx)(n.a,{href:\"#javascript-\\uD504\\uB85C\\uC81D\\uD2B8\\uC6A9-\\uBE4C\\uB4DC-\\uBD88\\uD544\\uC694\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"JavaScript \\uD504\\uB85C\\uC81D\\uD2B8\\uC6A9 (\\uBE4C\\uB4DC \\uBD88\\uD544\\uC694)\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" addgroup -g 1001 -S nodejs \u0026\u0026 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token instruction\",children:\"    adduser -S nodejs -u 1001\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci --only=production \u0026\u0026 npm cache clean --force\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--chown\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"nodejs:nodejs\"})]}),\" . .\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" nodejs\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 3000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"5s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" node -e \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"require('http').get('http://localhost:3000/health', (r) =\u003e {process.exit(r.statusCode === 200 ? 0 : 1)})\"`})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"src/index.js\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"docker-compose-db-\\uD3EC\\uD568\",children:[(0,e.jsx)(n.a,{href:\"#docker-compose-db-\\uD3EC\\uD568\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose (DB \\uD3EC\\uD568)\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"api\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3000:3000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` NODE_ENV=production\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` DB_HOST=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` DB_PORT=5432\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` DB_NAME=myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` DB_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` DB_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"depends_on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` service_healthy\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_DB=myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" postgres_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD-SHELL'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'pg_isready -U postgres'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 5s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"nestjs\",children:[(0,e.jsx)(n.a,{href:\"#nestjs\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"NestJS\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-3\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-3\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD5C\\uC801\\uD654\\uB41C Dockerfile\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Development Dependencies\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" development\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" . .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm run build\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" node:18-alpine \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" production\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# non-root \\uC720\\uC800\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" addgroup -g 1001 -S nodejs \u0026\u0026 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token instruction\",children:\"    adduser -S nestjs -u 1001\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD504\\uB85C\\uB355\\uC158 \\uC758\\uC874\\uC131\\uB9CC \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" package.json package-lock.json* ./\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci --only=production \u0026\u0026 npm cache clean --force\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uBE4C\\uB4DC\\uB41C \\uD30C\\uC77C \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--chown\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"nestjs:nodejs\"})]}),\" /app/dist ./dist\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" nestjs\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 3000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"10s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" node -e \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"require('http').get('http://localhost:3000/health', (r) =\u003e {process.exit(r.statusCode === 200 ? 0 : 1)})\"`})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"node\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"dist/main.js\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"docker-compose-redis--postgresql\",children:[(0,e.jsx)(n.a,{href:\"#docker-compose-redis--postgresql\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose (Redis + PostgreSQL)\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"nestjs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"target\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` production\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3000:3000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` NODE_ENV=production\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" DATABASE_URL=postgresql\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"password@postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`5432/nestdb\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` REDIS_HOST=redis\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` REDIS_PORT=6379\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"depends_on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` service_healthy\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` service_healthy\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_DB=nestdb\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" postgres_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD-SHELL'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'pg_isready -U postgres'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 5s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" redis\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"7\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'redis-cli'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'ping'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 3s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" redis_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/data\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"\\uAC1C\\uBC1C-\\uD658\\uACBD\\uC6A9-docker-composedevyml\",children:[(0,e.jsx)(n.a,{href:\"#\\uAC1C\\uBC1C-\\uD658\\uACBD\\uC6A9-docker-composedevyml\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uAC1C\\uBC1C \\uD658\\uACBD\\uC6A9 docker-compose.dev.yml\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"nestjs-dev\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"target\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` development\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3000:3000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'9229:9229'\"}),\" \",(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Debug port\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" .\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/app\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` /app/node_modules\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` NODE_ENV=development\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" DATABASE_URL=postgresql\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"password@postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`5432/nestdb\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"command\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" npm run start\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`dev\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"depends_on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` postgres\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_DB=nestdb\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'5432:5432'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" postgres_dev_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres_dev_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"fastapi-python\",children:[(0,e.jsx)(n.a,{href:\"#fastapi-python\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"FastAPI (Python)\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-4\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD5C\\uC801\\uD654\\uB41C-dockerfile-4\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD5C\\uC801\\uD654\\uB41C Dockerfile\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" python:3.11-slim \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC2DC\\uC2A4\\uD15C \\uC758\\uC874\\uC131\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" apt-get update \u0026\u0026 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"    apt-get install -y --no-install-recommends gcc \u0026\u0026 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token instruction\",children:\"    rm -rf /var/lib/apt/lists/*\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Python \\uC758\\uC874\\uC131 \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" requirements.txt .\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" pip install --user --no-cache-dir -r requirements.txt\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" python:3.11-slim \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" runner\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# non-root \\uC720\\uC800\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" groupadd -r appuser \u0026\u0026 useradd -r -g appuser appuser\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# builder\\uC5D0\\uC11C \\uC124\\uCE58\\uB41C \\uD328\\uD0A4\\uC9C0 \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /root/.local /home/appuser/.local\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# PATH\\uC5D0 \\uCD94\\uAC00\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" PATH=/home/appuser/.local/bin:\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$PATH\"})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC18C\\uC2A4 \\uCF54\\uB4DC \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--chown\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"appuser:appuser\"})]}),\" . .\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" appuser\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 8000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD5EC\\uC2A4\\uCCB4\\uD06C\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"5s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" python -c \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"import urllib.request; urllib.request.urlopen('http://localhost:8000/health')\"`})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"uvicorn\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"main:app\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--host\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"0.0.0.0\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--port\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"8000\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"poetry-\\uC0AC\\uC6A9-\\uC2DC\",children:[(0,e.jsx)(n.a,{href:\"#poetry-\\uC0AC\\uC6A9-\\uC2DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Poetry \\uC0AC\\uC6A9 \\uC2DC\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Build Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" python:3.11-slim \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" builder\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Poetry \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" pip install --no-cache-dir poetry\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# pyproject.toml\\uACFC poetry.lock \\uBCF5\\uC0AC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" pyproject.toml poetry.lock ./\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC758\\uC874\\uC131\\uC744 requirements.txt\\uB85C export\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" poetry export -f requirements.txt --output requirements.txt --without-hashes\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC758\\uC874\\uC131 \\uC124\\uCE58\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" pip install --user --no-cache-dir -r requirements.txt\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Production Stage\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# ===========================\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"FROM\"}),\" python:3.11-slim \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"AS\"}),\" runner\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"WORKDIR\"}),\" /app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" groupadd -r appuser \u0026\u0026 useradd -r -g appuser appuser\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"builder\"})]}),\" /root/.local /home/appuser/.local\"]}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"ENV\"}),\" PATH=/home/appuser/.local/bin:\",(0,e.jsx)(n.span,{className:\"token variable\",children:\"$PATH\"})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--chown\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"appuser:appuser\"})]}),\" ./app ./app\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"USER\"}),\" appuser\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"EXPOSE\"}),\" 8000\"]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"5s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" python -c \",(0,e.jsx)(n.span,{className:\"token string\",children:`\"import urllib.request; urllib.request.urlopen('http://localhost:8000/health')\"`})]}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" [\",(0,e.jsx)(n.span,{className:\"token string\",children:'\"uvicorn\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"app.main:app\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--host\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"0.0.0.0\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"--port\"'}),\", \",(0,e.jsx)(n.span,{className:\"token string\",children:'\"8000\"'}),\"]\"]}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"requirementstxt-\\uC608\\uC2DC\",children:[(0,e.jsx)(n.a,{href:\"#requirementstxt-\\uC608\\uC2DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"requirements.txt \\uC608\\uC2DC\"]}),(0,e.jsx)(n.pre,{className:\"language-txt\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-txt\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:`fastapi==0.104.1\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`uvicorn[standard]==0.24.0\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`pydantic==2.5.0\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`sqlalchemy==2.0.23\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`alembic==1.12.1\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`asyncpg==0.29.0\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`redis==5.0.1\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`python-jose[cryptography]==3.3.0\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`passlib[bcrypt]==1.7.4\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`python-multipart==0.0.6\n`})]})}),(0,e.jsxs)(n.h3,{id:\"docker-compose-postgresql--redis\",children:[(0,e.jsx)(n.a,{href:\"#docker-compose-postgresql--redis\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"Docker Compose (PostgreSQL + Redis)\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"fastapi\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'8000:8000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" DATABASE_URL=postgresql+asyncpg\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"password@postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`5432/fastapi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" REDIS_URL=redis\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//redis\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`6379/0\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"depends_on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` service_healthy\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"condition\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` service_healthy\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"restart\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" unless\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`stopped\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_DB=fastapi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" postgres_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD-SHELL'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'pg_isready -U postgres'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 5s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" redis\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"7\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"healthcheck\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"test\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'CMD'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'redis-cli'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'ping'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 10s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` 3s\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" redis_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/data\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"redis_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsxs)(n.h3,{id:\"\\uAC1C\\uBC1C-\\uD658\\uACBD\\uC6A9-\\uC124\\uC815\",children:[(0,e.jsx)(n.a,{href:\"#\\uAC1C\\uBC1C-\\uD658\\uACBD\\uC6A9-\\uC124\\uC815\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uAC1C\\uBC1C \\uD658\\uACBD\\uC6A9 \\uC124\\uC815\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"version\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'3.8'\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"fastapi-dev\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"dockerfile\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Dockerfile\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'8000:8000'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" ./app\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/app/app\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` ENVIRONMENT=development\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" DATABASE_URL=postgresql+asyncpg\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"//postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"password@postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`5432/fastapi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"command\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" uvicorn app.main\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"app \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"host 0.0.0.0 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"port 8000 \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`reload\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"depends_on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` postgres\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" postgres\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\"15\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`alpine\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"environment\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_DB=fastapi\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_USER=postgres\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` POSTGRES_PASSWORD=password\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'5432:5432'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" postgres_dev_data\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`/var/lib/postgresql/data\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"volumes\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"postgres_dev_data\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"\\uACF5\\uD1B5-\\uCD5C\\uC801\\uD654-\\uD301\",children:[(0,e.jsx)(n.a,{href:\"#\\uACF5\\uD1B5-\\uCD5C\\uC801\\uD654-\\uD301\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uACF5\\uD1B5 \\uCD5C\\uC801\\uD654 \\uD301\"]}),(0,e.jsxs)(n.h3,{id:\"1-\\uBE4C\\uB4DC-\\uC2DC\\uAC04-\\uB2E8\\uCD95\",children:[(0,e.jsx)(n.a,{href:\"#1-\\uBE4C\\uB4DC-\\uC2DC\\uAC04-\\uB2E8\\uCD95\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. \\uBE4C\\uB4DC \\uC2DC\\uAC04 \\uB2E8\\uCD95\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\uBCD1\\uB82C \\uBE4C\\uB4DC \\uD65C\\uC131\\uD654:\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# Docker BuildKit \\uC0AC\\uC6A9\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"DOCKER_BUILDKIT\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" build \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-t\"}),\" myapp \",(0,e.jsx)(n.span,{className:\"token class-name builtin\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uB610\\uB294 \\uD658\\uACBD \\uBCC0\\uC218\\uB85C \\uC124\\uC815\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token class-name builtin\",children:\"export\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"DOCKER_BUILDKIT\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token number\",children:\"1\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\uBA40\\uD2F0 \\uD50C\\uB7AB\\uD3FC \\uBE4C\\uB4DC:\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# arm64, amd64 \\uB3D9\\uC2DC \\uBE4C\\uB4DC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" buildx build \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"--platform\"}),\" linux/amd64,linux/arm64 \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-t\"}),\" myapp:latest \",(0,e.jsx)(n.span,{className:\"token class-name builtin\",children:\".\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"2-\\uC774\\uBBF8\\uC9C0-\\uC2A4\\uCE94-\\uBCF4\\uC548\",children:[(0,e.jsx)(n.a,{href:\"#2-\\uC774\\uBBF8\\uC9C0-\\uC2A4\\uCE94-\\uBCF4\\uC548\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. \\uC774\\uBBF8\\uC9C0 \\uC2A4\\uCE94 (\\uBCF4\\uC548)\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Trivy \\uC0AC\\uC6A9:\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC774\\uBBF8\\uC9C0 \\uC2A4\\uCE94\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`trivy image myapp:latest\n`}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC2EC\\uAC01\\uB3C4 HIGH \\uC774\\uC0C1\\uB9CC \\uD45C\\uC2DC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"trivy image \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"--severity\"}),` HIGH,CRITICAL myapp:latest\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"Docker Scout (Docker Desktop \\uD3EC\\uD568):\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),` scout cves myapp:latest\n`]})})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"3-\\uB808\\uC774\\uC5B4-\\uD655\\uC778\",children:[(0,e.jsx)(n.a,{href:\"#3-\\uB808\\uC774\\uC5B4-\\uD655\\uC778\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. \\uB808\\uC774\\uC5B4 \\uD655\\uC778\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uB808\\uC774\\uC5B4\\uBCC4 \\uD06C\\uAE30 \\uD655\\uC778\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" \",(0,e.jsx)(n.span,{className:\"token function\",children:\"history\"}),` myapp:latest\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC0C1\\uC138 \\uC815\\uBCF4\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),` inspect myapp:latest\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"4-\\uBD88\\uD544\\uC694\\uD55C-\\uD30C\\uC77C-\\uC81C\\uAC70\",children:[(0,e.jsx)(n.a,{href:\"#4-\\uBD88\\uD544\\uC694\\uD55C-\\uD30C\\uC77C-\\uC81C\\uAC70\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"4. \\uBD88\\uD544\\uC694\\uD55C \\uD30C\\uC77C \\uC81C\\uAC70\"]}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uCE90\\uC2DC \\uC0AD\\uC81C\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" apt-get update \u0026\u0026 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"    apt-get install -y package \u0026\u0026 \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token instruction\",children:\"    rm -rf /var/lib/apt/lists/*\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# npm \\uCE90\\uC2DC \\uC0AD\\uC81C\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"RUN\"}),\" npm ci \u0026\u0026 npm cache clean --force\"]}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"5-\\uD658\\uACBD\\uBCC4-\\uBE4C\\uB4DC\",children:[(0,e.jsx)(n.a,{href:\"#5-\\uD658\\uACBD\\uBCC4-\\uBE4C\\uB4DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"5. \\uD658\\uACBD\\uBCC4 \\uBE4C\\uB4DC\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uAC1C\\uBC1C \\uD658\\uACBD\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker-compose\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-f\"}),\" docker-compose.yml \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-f\"}),` docker-compose.dev.yml up\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD504\\uB85C\\uB355\\uC158 \\uD658\\uACBD\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker-compose\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-f\"}),\" docker-compose.yml \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-f\"}),` docker-compose.prod.yml up\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"\\uC8FC\\uC758\\uC0AC\\uD56D\",children:[(0,e.jsx)(n.a,{href:\"#\\uC8FC\\uC758\\uC0AC\\uD56D\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC8FC\\uC758\\uC0AC\\uD56D\"]}),(0,e.jsxs)(n.h3,{id:\"1-secrets-\\uAD00\\uB9AC\",children:[(0,e.jsx)(n.a,{href:\"#1-secrets-\\uAD00\\uB9AC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. Secrets \\uAD00\\uB9AC\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u274C \\uC808\\uB300 \\uD558\\uC9C0 \\uB9D0 \\uAC83:\"})}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC774\\uBBF8\\uC9C0\\uC5D0 secrets \\uD3EC\\uD568\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"COPY\"}),\" .env .\"]}),`\n`]})]})}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"\\u2705 \\uC62C\\uBC14\\uB978 \\uBC29\\uBC95:\"})}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uB7F0\\uD0C0\\uC784\\uC5D0 \\uD658\\uACBD \\uBCC0\\uC218\\uB85C \\uC8FC\\uC785\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" run \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-e\"}),\" \",(0,e.jsx)(n.span,{className:\"token variable assign-left\",children:\"DB_PASSWORD\"}),(0,e.jsx)(n.span,{className:\"token operator\",children:\"=\"}),`secret myapp\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uB610\\uB294 Docker Secrets \\uC0AC\\uC6A9:\"}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# docker-compose.yml\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"services\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secrets\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),` db_password\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"secrets\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"db_password\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"file\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` ./secrets/db_password.txt\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"2-\\uD5EC\\uC2A4\\uCCB4\\uD06C-\\uD544\\uC218\",children:[(0,e.jsx)(n.a,{href:\"#2-\\uD5EC\\uC2A4\\uCCB4\\uD06C-\\uD544\\uC218\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. \\uD5EC\\uC2A4\\uCCB4\\uD06C \\uD544\\uC218\"]}),(0,e.jsx)(n.p,{children:\"\\uBAA8\\uB4E0 \\uD504\\uB85C\\uB355\\uC158 \\uCEE8\\uD14C\\uC774\\uB108\\uC5D0 \\uD5EC\\uC2A4\\uCCB4\\uD06C \\uCD94\\uAC00:\"}),(0,e.jsx)(n.pre,{className:\"language-dockerfile\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-dockerfile\",children:[(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsxs)(n.span,{className:\"token instruction\",children:[(0,e.jsx)(n.span,{className:\"token keyword\",children:\"HEALTHCHECK\"}),\" \",(0,e.jsxs)(n.span,{className:\"token options\",children:[(0,e.jsx)(n.span,{className:\"token property\",children:\"--interval\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"30s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--timeout\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--start-period\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"5s\"}),\" \",(0,e.jsx)(n.span,{className:\"token property\",children:\"--retries\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"=\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"3\"})]}),\" \",(0,e.jsx)(n.span,{className:\"token operator\",children:\"\\\\\"}),`\n`]})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsxs)(n.span,{className:\"token instruction\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token keyword\",children:\"CMD\"}),\" curl -f http://localhost:3000/health || exit 1\"]}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"3-\\uB85C\\uADF8-\\uAD00\\uB9AC\",children:[(0,e.jsx)(n.a,{href:\"#3-\\uB85C\\uADF8-\\uAD00\\uB9AC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. \\uB85C\\uADF8 \\uAD00\\uB9AC\"]}),(0,e.jsx)(n.p,{children:(0,e.jsx)(n.strong,{children:\"stdout/stderr\\uB85C \\uB85C\\uADF8 \\uCD9C\\uB825:\"})}),(0,e.jsx)(n.pre,{className:\"language-javascript\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-javascript\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"// Express.js\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"log\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Server started'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token class-name console\",children:\"console\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\".\"}),(0,e.jsx)(n.span,{className:\"token function property-access method\",children:\"error\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"(\"}),(0,e.jsx)(n.span,{className:\"token string\",children:\"'Error occurred'\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\")\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),(0,e.jsx)(n.p,{children:\"\\uCEE8\\uD14C\\uC774\\uB108 \\uB85C\\uADF8 \\uD655\\uC778:\"}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsx)(n.code,{className:\"code-highlight language-bash\",children:(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" logs \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-f\"}),` container-name\n`]})})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"\\uC2E4\\uC804-\\uBC30\\uD3EC-\\uC6CC\\uD06C\\uD50C\\uB85C\\uC6B0\",children:[(0,e.jsx)(n.a,{href:\"#\\uC2E4\\uC804-\\uBC30\\uD3EC-\\uC6CC\\uD06C\\uD50C\\uB85C\\uC6B0\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uC2E4\\uC804 \\uBC30\\uD3EC \\uC6CC\\uD06C\\uD50C\\uB85C\\uC6B0\"]}),(0,e.jsxs)(n.h3,{id:\"1-\\uB85C\\uCEEC-\\uBE4C\\uB4DC--\\uD14C\\uC2A4\\uD2B8\",children:[(0,e.jsx)(n.a,{href:\"#1-\\uB85C\\uCEEC-\\uBE4C\\uB4DC--\\uD14C\\uC2A4\\uD2B8\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"1. \\uB85C\\uCEEC \\uBE4C\\uB4DC \u0026 \\uD14C\\uC2A4\\uD2B8\"]}),(0,e.jsx)(n.pre,{className:\"language-bash\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-bash\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uBE4C\\uB4DC\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" build \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-t\"}),\" myapp:latest \",(0,e.jsx)(n.span,{className:\"token class-name builtin\",children:\".\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uC2E4\\uD589\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"docker\"}),\" run \",(0,e.jsx)(n.span,{className:\"token variable parameter\",children:\"-p\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),`:3000 myapp:latest\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token comment\",children:\"# \\uD5EC\\uC2A4\\uCCB4\\uD06C \\uD655\\uC778\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token function\",children:\"curl\"}),` http://localhost:3000/health\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"2-cicd-github-actions-\\uC608\\uC2DC\",children:[(0,e.jsx)(n.a,{href:\"#2-cicd-github-actions-\\uC608\\uC2DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"2. CI/CD (GitHub Actions \\uC608\\uC2DC)\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Docker Build and Push\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"branches\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"[\"}),\"main\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"]\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"jobs\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"build\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"runs-on\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" ubuntu\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`latest\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"steps\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` actions/checkout@v3\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Set up Docker Buildx\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker/setup\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"buildx\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`action@v2\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Login to Docker Hub\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker/login\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`action@v2\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"with\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"username\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" $\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" secrets.DOCKER_USERNAME \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"password\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" $\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"{\"}),\" secrets.DOCKER_PASSWORD \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"}\"}),`\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Build and push\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"uses\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" docker/build\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\"push\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),`action@v4\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"with\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"context\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` .\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"push\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token boolean important\",children:\"true\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"tags\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" username/myapp\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`latest\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"cache-from\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` type=gha\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"cache-to\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" type=gha\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\",\"}),`mode=max\n`]}),(0,e.jsx)(n.span,{className:\"code-line\",children:`\n`}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Scan image\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"run\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"|\"}),(0,e.jsx)(n.span,{className:\"token string scalar\",children:`\n`})]}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`          docker run --rm \\\\\n`})}),(0,e.jsx)(n.span,{className:\"code-line\",children:(0,e.jsx)(n.span,{className:\"token string scalar\",children:`            -v /var/run/docker.sock:/var/run/docker.sock \\\\\n`})}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token string scalar\",children:\"            aquasec/trivy image username/myapp:latest\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h3,{id:\"3-\\uBC30\\uD3EC-kubernetes-\\uC608\\uC2DC\",children:[(0,e.jsx)(n.a,{href:\"#3-\\uBC30\\uD3EC-kubernetes-\\uC608\\uC2DC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"3. \\uBC30\\uD3EC (Kubernetes \\uC608\\uC2DC)\"]}),(0,e.jsx)(n.pre,{className:\"language-yaml\",children:(0,e.jsxs)(n.code,{className:\"code-highlight language-yaml\",children:[(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"apiVersion\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` apps/v1\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"kind\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` Deployment\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"replicas\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"selector\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"matchLabels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"  \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"template\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"metadata\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"labels\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"app\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"    \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"spec\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"      \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containers\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"        \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"name\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` myapp\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"image\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" username/myapp\",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`latest\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"ports\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token punctuation\",children:\"-\"}),\" \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"containerPort\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"livenessProbe\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"httpGet\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /health\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"initialDelaySeconds\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"periodSeconds\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"10\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"readinessProbe\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"httpGet\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"path\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),` /health\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"port\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"3000\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"initialDelaySeconds\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"periodSeconds\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token number\",children:\"5\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"          \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"resources\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"requests\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"memory\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'256Mi'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"cpu\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'250m'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"            \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"limits\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"memory\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'512Mi'\"}),`\n`]}),(0,e.jsxs)(n.span,{className:\"code-line\",children:[\"              \",(0,e.jsx)(n.span,{className:\"token atrule key\",children:\"cpu\"}),(0,e.jsx)(n.span,{className:\"token punctuation\",children:\":\"}),\" \",(0,e.jsx)(n.span,{className:\"token string\",children:\"'500m'\"}),`\n`]})]})}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.h2,{id:\"\\uB9C8\\uCE58\\uBA70\",children:[(0,e.jsx)(n.a,{href:\"#\\uB9C8\\uCE58\\uBA70\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uB9C8\\uCE58\\uBA70\"]}),(0,e.jsxs)(n.h3,{id:\"\\uCCB4\\uD06C\\uB9AC\\uC2A4\\uD2B8\",children:[(0,e.jsx)(n.a,{href:\"#\\uCCB4\\uD06C\\uB9AC\\uC2A4\\uD2B8\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCCB4\\uD06C\\uB9AC\\uC2A4\\uD2B8\"]}),(0,e.jsxs)(n.p,{children:[\"\\u2705 \",(0,e.jsx)(n.strong,{children:\"\\uBA40\\uD2F0\\uC2A4\\uD14C\\uC774\\uC9C0 \\uBE4C\\uB4DC \\uC0AC\\uC6A9\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\"\\uB808\\uC774\\uC5B4 \\uCE90\\uC2F1 \\uCD5C\\uC801\\uD654\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\"non-root \\uC720\\uC800 \\uC2E4\\uD589\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\".dockerignore \\uC791\\uC131\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\"\\uD5EC\\uC2A4\\uCCB4\\uD06C \\uC124\\uC815\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\"\\uBCF4\\uC548 \\uC2A4\\uCE94 \\uC2E4\\uD589\"}),\" \\u2705 \",(0,e.jsx)(n.strong,{children:\"\\uC774\\uBBF8\\uC9C0 \\uD06C\\uAE30 \\uD655\\uC778\"})]}),(0,e.jsxs)(n.h3,{id:\"\\uCD94\\uAC00-\\uD559\\uC2B5-\\uC790\\uB8CC\",children:[(0,e.jsx)(n.a,{href:\"#\\uCD94\\uAC00-\\uD559\\uC2B5-\\uC790\\uB8CC\",\"aria-hidden\":\"true\",tabIndex:\"-1\",children:(0,e.jsx)(n.span,{className:\"icon icon-link\"})}),\"\\uCD94\\uAC00 \\uD559\\uC2B5 \\uC790\\uB8CC\"]}),(0,e.jsxs)(n.ul,{children:[(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://docs.docker.com/develop/dev-best-practices/\",children:\"Docker \\uACF5\\uC2DD \\uBB38\\uC11C - Best Practices\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://nextjs.org/docs/deployment#docker-image\",children:\"Next.js Docker \\uAC00\\uC774\\uB4DC\"})}),(0,e.jsx)(n.li,{children:(0,e.jsx)(n.a,{href:\"https://aquasecurity.github.io/trivy/\",children:\"Trivy \\uBB38\\uC11C\"})})]}),(0,e.jsx)(n.hr,{}),(0,e.jsxs)(n.p,{children:[(0,e.jsx)(n.strong,{children:\"\\uC791\\uC131\\uC77C:\"}),\" 2025-11-17 \",(0,e.jsx)(n.strong,{children:\"\\uB9C8\\uC9C0\\uB9C9 \\uC218\\uC815:\"}),\" 2025-11-17\"]})]})}}var w=f;return b;})();\n;return Component;","toc":[{"value":"목차","url":"#목차","depth":2},{"value":"Dockerfile 작성 기본 원칙","url":"#dockerfile-작성-기본-원칙","depth":2},{"value":"1. 멀티스테이지 빌드 사용","url":"#1-멀티스테이지-빌드-사용","depth":3},{"value":"2. 레이어 캐싱 최적화","url":"#2-레이어-캐싱-최적화","depth":3},{"value":"3. 보안 강화","url":"#3-보안-강화","depth":3},{"value":"4. .dockerignore 필수","url":"#4-dockerignore-필수","depth":3},{"value":"Next.js (App Router)","url":"#nextjs-app-router","depth":2},{"value":"최적화된 Dockerfile","url":"#최적화된-dockerfile","depth":3},{"value":"next.config.js 설정 필수","url":"#nextconfigjs-설정-필수","depth":3},{"value":"Docker Compose 예시","url":"#docker-compose-예시","depth":3},{"value":"React + Vite","url":"#react--vite","depth":2},{"value":"최적화된 Dockerfile","url":"#최적화된-dockerfile","depth":3},{"value":"nginx.conf","url":"#nginxconf","depth":3},{"value":".dockerignore","url":"#dockerignore","depth":3},{"value":"Docker Compose 예시","url":"#docker-compose-예시","depth":3},{"value":"환경 변수 빌드 시 주입","url":"#환경-변수-빌드-시-주입","depth":3},{"value":"Express.js","url":"#expressjs","depth":2},{"value":"최적화된 Dockerfile","url":"#최적화된-dockerfile","depth":3},{"value":"JavaScript 프로젝트용 (빌드 불필요)","url":"#javascript-프로젝트용-빌드-불필요","depth":3},{"value":"Docker Compose (DB 포함)","url":"#docker-compose-db-포함","depth":3},{"value":"NestJS","url":"#nestjs","depth":2},{"value":"최적화된 Dockerfile","url":"#최적화된-dockerfile","depth":3},{"value":"Docker Compose (Redis + PostgreSQL)","url":"#docker-compose-redis--postgresql","depth":3},{"value":"개발 환경용 docker-compose.dev.yml","url":"#개발-환경용-docker-composedevyml","depth":3},{"value":"FastAPI (Python)","url":"#fastapi-python","depth":2},{"value":"최적화된 Dockerfile","url":"#최적화된-dockerfile","depth":3},{"value":"Poetry 사용 시","url":"#poetry-사용-시","depth":3},{"value":"requirements.txt 예시","url":"#requirementstxt-예시","depth":3},{"value":"Docker Compose (PostgreSQL + Redis)","url":"#docker-compose-postgresql--redis","depth":3},{"value":"개발 환경용 설정","url":"#개발-환경용-설정","depth":3},{"value":"공통 최적화 팁","url":"#공통-최적화-팁","depth":2},{"value":"1. 빌드 시간 단축","url":"#1-빌드-시간-단축","depth":3},{"value":"2. 이미지 스캔 (보안)","url":"#2-이미지-스캔-보안","depth":3},{"value":"3. 레이어 확인","url":"#3-레이어-확인","depth":3},{"value":"4. 불필요한 파일 제거","url":"#4-불필요한-파일-제거","depth":3},{"value":"5. 환경별 빌드","url":"#5-환경별-빌드","depth":3},{"value":"주의사항","url":"#주의사항","depth":2},{"value":"1. Secrets 관리","url":"#1-secrets-관리","depth":3},{"value":"2. 헬스체크 필수","url":"#2-헬스체크-필수","depth":3},{"value":"3. 로그 관리","url":"#3-로그-관리","depth":3},{"value":"실전 배포 워크플로우","url":"#실전-배포-워크플로우","depth":2},{"value":"1. 로컬 빌드 \u0026 테스트","url":"#1-로컬-빌드--테스트","depth":3},{"value":"2. CI/CD (GitHub Actions 예시)","url":"#2-cicd-github-actions-예시","depth":3},{"value":"3. 배포 (Kubernetes 예시)","url":"#3-배포-kubernetes-예시","depth":3},{"value":"마치며","url":"#마치며","depth":2},{"value":"체크리스트","url":"#체크리스트","depth":3},{"value":"추가 학습 자료","url":"#추가-학습-자료","depth":3}],"frontMatter":{"readingTime":{"text":"20 min read","minutes":19.895,"time":1193700,"words":3979},"slug":"doc/dockerfile-best-practices-by-framework","fileName":"doc/dockerfile-best-practices-by-framework.mdx","title":"실전 Dockerfile 작성 패턴: 프레임워크별 베스트 프랙티스","date":"2025-11-17T00:00:00.000Z","tags":["docker","dockerfile","nextjs","react","nodejs","python","devops"],"draft":false,"summary":"Next.js, React, Express, NestJS, FastAPI 등 주요 프레임워크별로 최적화된 Dockerfile 작성법과 멀티스테이지 빌드, 보안, 캐시 최적화 전략을 실전 예시와 함께 정리했습니다.","images":[],"layout":"PostSimple","canonicalUrl":"https://bulhwi.github.io/blog/dockerfile-best-practices-by-framework"}},"authorDetails":[{"readingTime":{"text":"1 min read","minutes":0.155,"time":9300,"words":31},"slug":["default"],"fileName":"default.md","name":"bulhwi.github.io","avatar":"/static/images/Avatar-Maker.png","occupation":null,"company":null,"email":null,"twitter":null,"linkedin":null,"github":"https://github.com/bulhwi","date":null}],"prev":{"title":"Claude Code 성능 최적화 및 비용 절약 완벽 가이드","date":"2025-11-16T22:30:00.000Z","lastmod":"2025-11-16","tags":["claude-code","optimization","cost-saving","performance","productivity"],"draft":false,"summary":"Claude Code API 비용을 효율적으로 관리하는 실전 전략. 모델 선택, 컨텍스트 관리, 토큰 최적화로 최대 70%까지 절감 가능.","layout":"PostSimple","slug":"doc/claude-code-performance-cost-optimization"},"next":{"title":"Claude Code Plan Mode 완벽 활용 가이드","date":"2025-11-17T00:00:00.000Z","tags":["claude-code","ai","productivity","workflow"],"draft":false,"summary":"Claude Code의 Plan Mode를 활용하여 복잡한 개발 작업을 체계적으로 계획하고 실행하는 방법을 실전 예제와 함께 알아봅니다.","images":[],"layout":"PostSimple","canonicalUrl":"https://bulhwi.github.io/blog/claude-code-plan-mode-guide","slug":"doc/claude-code-plan-mode-guide"}},"__N_SSG":true},"page":"/blog/[...slug]","query":{"slug":["doc","dockerfile-best-practices-by-framework"]},"buildId":"HXhK500Kz7z-1paeCWXJG","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>